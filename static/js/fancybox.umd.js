!function(a,U){"object"==typeof exports&&"undefined"!=typeof module?U(exports):"function"==typeof define&&define.amd?define(["exports"],U):U((a="undefined"!=typeof globalThis?globalThis:a||self).window=a.window||{})}(this,function(a){"use strict";function U(a,U){var d=Object.keys(a);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(a);U&&(i=i.filter(function(U){return Object.getOwnPropertyDescriptor(a,U).enumerable})),d.push.apply(d,i)}return d}function d(a){for(var d=1;d<arguments.length;d++){var i=null!=arguments[d]?arguments[d]:{};d%2?U(Object(i),!0).forEach(function(U){dA(a,U,i[U])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(i)):U(Object(i)).forEach(function(U){Object.defineProperty(a,U,Object.getOwnPropertyDescriptor(i,U))})}return a}function i(a){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a})(a)}function c(a,U){if(!(a instanceof U))throw new TypeError("Cannot call a class as a function")}function e(a,U){for(var d=0;d<U.length;d++){var i=U[d];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}}function cS(a,U,d){return U&&e(a.prototype,U),d&&e(a,d),a}function dA(a,U,d){return U in a?Object.defineProperty(a,U,{value:d,enumerable:!0,configurable:!0,writable:!0}):a[U]=d,a}function dZ(a,U){if("function"!=typeof U&&null!==U)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(U&&U.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),U&&g(a,U)}function ei(a){return(ei=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)})(a)}function g(a,U){return(g=Object.setPrototypeOf||function(a,U){return a.__proto__=U,a})(a,U)}function H(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function cZ(a,U){return!U||"object"!=typeof U&&"function"!=typeof U?H(a):U}function b(a){var U=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(a){return!1}}();return function(){var d,i=ei(a);if(U){var c=ei(this).constructor;d=Reflect.construct(i,arguments,c)}else d=i.apply(this,arguments);return cZ(this,d)}}function j(a,U){return function(a){if(Array.isArray(a))return a}(a)||function(a,U){var d=null==a?null:"undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(null==d)return;var i,c,e=[],cS=!0,dA=!1;try{for(d=d.call(a);!(cS=(i=d.next()).done)&&(e.push(i.value),!U||e.length!==U);cS=!0);}catch(a){dA=!0,c=a}finally{try{cS||null==d.return||d.return()}finally{if(dA)throw c}}return e}(a,U)||F(a,U)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(a){return function(a){if(Array.isArray(a))return aU(a)}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a)||F(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(a,U){if(a){if("string"==typeof a)return aU(a,U);var d=Object.prototype.toString.call(a).slice(8,-1);return"Object"===d&&a.constructor&&(d=a.constructor.name),"Map"===d||"Set"===d?Array.from(a):"Arguments"===d||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(d)?aU(a,U):void 0}}function aU(a,U){(null==U||U>a.length)&&(U=a.length);for(var d=0,i=new Array(U);d<U;d++)i[d]=a[d];return i}function aj(a,U){var d="undefined"!=typeof Symbol&&a[Symbol.iterator]||a["@@iterator"];if(!d){if(Array.isArray(a)||(d=F(a))||U&&a&&"number"==typeof a.length){d&&(a=d);var i=0,c=function(){};return{s:c,n:function(){return i>=a.length?{done:!0}:{done:!1,value:a[i++]}},e:function(a){throw a},f:c}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var e,cS=!0,dA=!1;return{s:function(){d=d.call(a)},n:function(){var a=d.next();return cS=a.done,a},e:function(a){dA=!0,e=a},f:function(){try{cS||null==d.return||d.return()}finally{if(dA)throw e}}}}var gb=function(a){return"object"===i(a)&&null!==a&&a.constructor===Object&&"[object Object]"===Object.prototype.toString.call(a)},eX=function a(){for(var U=!1,d=arguments.length,c=new Array(d),e=0;e<d;e++)c[e]=arguments[e];"boolean"==typeof c[0]&&(U=c.shift());var cS=c[0];if(!cS||"object"!==i(cS))throw new Error("extendee must be an object");for(var dA=c.slice(1),dZ=dA.length,ei=0;ei<dZ;ei++){var g=dA[ei];for(var H in g)if(g.hasOwnProperty(H)){var cZ=g[H];if(U&&(Array.isArray(cZ)||gb(cZ))){var b=Array.isArray(cZ)?[]:{};cS[H]=a(!0,cS.hasOwnProperty(H)?cS[H]:b,cZ)}else cS[H]=cZ}}return cS},ec=function(a){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e4;return a=parseFloat(a)||0,Math.round((a+Number.EPSILON)*U)/U},gF="undefined"!=typeof window&&window.ResizeObserver||function(){function a(U){c(this,a),this.observables=[],this.boundCheck=this.check.bind(this),this.boundCheck(),this.callback=U}return cS(a,[{key:"observe",value:function(a){if(!this.observables.some(function(U){return U.el===a})){var U={el:a,size:{height:a.clientHeight,width:a.clientWidth}};this.observables.push(U)}}},{key:"unobserve",value:function(a){this.observables=this.observables.filter(function(U){return U.el!==a})}},{key:"disconnect",value:function(){this.observables=[]}},{key:"check",value:function(){var a=this.observables.filter(function(a){var U=a.el.clientHeight,d=a.el.clientWidth;if(a.size.height!==U||a.size.width!==d)return a.size.height=U,a.size.width=d,!0}).map(function(a){return a.el});a.length>0&&this.callback(a),window.requestAnimationFrame(this.boundCheck)}}]),a}(),bD=function(){var a=window.getSelection?window.getSelection():document.selection;a&&a.rangeCount&&a.getRangeAt(0).getClientRects().length&&(a.removeAllRanges?a.removeAllRanges():a.empty&&a.empty())},cj=function a(U){c(this,a),this.id=-1,this.id=U.pointerId||U.identifier||-1,this.pageX=U.pageX,this.pageY=U.pageY,this.clientX=U.clientX,this.clientY=U.clientY,this.nativePointer=U};function dQ(a,U){return U?Math.sqrt(Math.pow(U.clientX-a.clientX,2)+Math.pow(U.clientY-a.clientY,2)):0}function cW(a,U){return U?{clientX:(a.clientX+U.clientX)/2,clientY:(a.clientY+U.clientY)/2}:a}var fO=function(){function a(U){var d=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=i.start,cS=void 0===e?function(){return!0}:e,dA=i.move,dZ=void 0===dA?function(){}:dA,ei=i.end,g=void 0===ei?function(){}:ei;c(this,a),this.element=U,this.startPointers=[],this.currentPointers=[],this.startCallback=cS,this.moveCallback=dZ,this.endCallback=g,this.onStart=function(a){if(!a.button||0===a.button){var U=new cj(a);if(!1===d.startCallback(U,a))return!1;a.preventDefault(),bD(),d.currentPointers.push(U),d.startPointers.push(U),(a.target&&"setPointerCapture"in a.target?a.target:d.element).setPointerCapture(a.pointerId),d.element.addEventListener("pointermove",d.onMove),d.element.addEventListener("pointerup",d.onEnd),d.element.addEventListener("pointercancel",d.onEnd)}},this.onMove=function(a){for(var U=d.currentPointers.slice(),i=[],c=function(){var a=cS[e],U=d.currentPointers.findIndex(function(U){return U.id===a.id});if(U<0)return"continue";i.push(a),d.currentPointers[U]=a},e=0,cS=[new cj(a)];e<cS.length;e++)c();i.length&&d.moveCallback(U,d.currentPointers,a)},this.onEnd=function(a){var U=new cj(a),i=d.currentPointers.findIndex(function(a){return a.id===U.id});if(-1===i)return!1;d.currentPointers.splice(i,1),d.startPointers.splice(i,1),d.endCallback(U,a),d.currentPointers.length||(d.element.removeEventListener("pointermove",d.onMove),d.element.removeEventListener("pointerup",d.onEnd),d.element.removeEventListener("pointercancel",d.onEnd))},this.element.addEventListener("pointerdown",this.onStart)}return cS(a,[{key:"stop",value:function(){this.element.removeEventListener("pointerdown",this.onStart),this.element.removeEventListener("pointermove",this.onMove),this.element.removeEventListener("pointerup",this.onEnd),this.element.removeEventListener("pointercancel",this.onEnd)}}]),a}(),cY=function a(U){return!(!U||U===document.body)&&(function(a){var U=window.getComputedStyle(a)["overflow-y"],d=window.getComputedStyle(a)["overflow-x"],i=("scroll"===U||"auto"===U)&&Math.abs(a.scrollHeight-a.clientHeight)>1,c=("scroll"===d||"auto"===d)&&Math.abs(a.scrollWidth-a.clientWidth)>1;return i||c}(U)?U:a(U.parentNode))},bC=function(){function a(){var U=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,a),this.options=eX(!0,{},U),this.plugins=[],this.events={};for(var d=0,i=["on","once"];d<i.length;d++)for(var e=i[d],cS=0,dA=Object.entries(this.options[e]||{});cS<dA.length;cS++){var dZ=dA[cS];this[e].apply(this,f(dZ))}}return cS(a,[{key:"option",value:function(a,U){a=String(a);var d,i,c=(d=a,i=this.options,d.split(".").reduce(function(a,U){return a&&a[U]},i));return"function"==typeof c&&(c=c.call(this,a)),void 0===c?U:c}},{key:"localize",value:function(a){var U=this,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return String(a).replace(/\{\{(\w+).?(\w+)?\}\}/g,function(a,i,c){var e=!1;if(!(e=c?U.option("".concat(i[0]+i.toLowerCase().substring(1),".l10n.").concat(c)):U.option("l10n.".concat(i))))return i;for(var cS=0;cS<d.length;cS++)e=e.split(d[cS][0]).join(d[cS][1]);return e})}},{key:"on",value:function(a,U){var d=this;if(gb(a)){for(var i=0,c=Object.entries(a);i<c.length;i++){var e=c[i];this.on.apply(this,f(e))}return this}return String(a).split(" ").forEach(function(a){var i=d.events[a]=d.events[a]||[];-1==i.indexOf(U)&&i.push(U)}),this}},{key:"once",value:function(a,U){var d=this;if(gb(a)){for(var i=0,c=Object.entries(a);i<c.length;i++){var e=c[i];this.once.apply(this,f(e))}return this}return String(a).split(" ").forEach(function(a){var i=function i(){d.off(a,i);for(var c=arguments.length,e=new Array(c),cS=0;cS<c;cS++)e[cS]=arguments[cS];U.call.apply(U,[d,d].concat(e))};i._=U,d.on(a,i)}),this}},{key:"off",value:function(a,U){var d=this;if(!gb(a))return a.split(" ").forEach(function(a){var i=d.events[a];if(!i||!i.length)return d;for(var c=-1,e=0,cS=i.length;e<cS;e++){var dA=i[e];if(dA&&(dA===U||dA._===U)){c=e;break}}-1!=c&&i.splice(c,1)}),this;for(var i=0,c=Object.entries(a);i<c.length;i++){var e=c[i];this.off.apply(this,f(e))}}},{key:"trigger",value:function(a){for(var U=arguments.length,d=new Array(U>1?U-1:0),i=1;i<U;i++)d[i-1]=arguments[i];var c,e=aj(f(this.events[a]||[]).slice());try{for(e.s();!(c=e.n()).done;){var cS=c.value;if(cS&&!1===cS.call.apply(cS,[this,this].concat(d)))return!1}}catch(a){e.e(a)}finally{e.f()}var dA,dZ=aj(f(this.events["*"]||[]).slice());try{for(dZ.s();!(dA=dZ.n()).done;){var ei=dA.value;if(ei&&!1===ei.call.apply(ei,[this,a,this].concat(d)))return!1}}catch(a){dZ.e(a)}finally{dZ.f()}return!0}},{key:"attachPlugins",value:function(a){for(var U={},d=0,i=Object.entries(a||{});d<i.length;d++){var c=j(i[d],2),e=c[0],cS=c[1];!1===this.options[e]||this.plugins[e]||(this.options[e]=eX({},cS.defaults||{},this.options[e]),U[e]=new cS(this))}for(var dA=0,dZ=Object.entries(U);dA<dZ.length;dA++){var ei=j(dZ[dA],2);ei[0],ei[1].attach(this)}return this.plugins=Object.assign({},this.plugins,U),this}},{key:"detachPlugins",value:function(){for(var a in this.plugins){var U=void 0;(U=this.plugins[a])&&"function"==typeof U.detach&&U.detach(this)}return this.plugins={},this}}]),a}(),gV={touch:!0,zoom:!0,pinchToZoom:!0,panOnlyZoomed:!1,lockAxis:!1,friction:.64,decelFriction:.88,zoomFriction:.74,bounceForce:.2,baseScale:1,minScale:1,maxScale:2,step:.5,textSelection:!1,click:"toggleZoom",wheel:"zoom",wheelFactor:42,wheelLimit:5,draggableClass:"is-draggable",draggingClass:"is-dragging",ratio:1},bW=function(a){dZ(i,a);var U=b(i);function i(a){var d,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};c(this,i),(d=U.call(this,eX(!0,{},gV,e))).state="init",d.$container=a;for(var cS=0,dA=["onLoad","onWheel","onClick"];cS<dA.length;cS++){var dZ=dA[cS];d[dZ]=d[dZ].bind(H(d))}return d.initLayout(),d.resetValues(),d.attachPlugins(i.Plugins),d.trigger("init"),d.updateMetrics(),d.attachEvents(),d.trigger("ready"),!1===d.option("centerOnStart")?d.state="ready":d.panTo({friction:0}),d}return cS(i,[{key:"initLayout",value:function(){var a=this.$container;if(!(a instanceof HTMLElement))throw new Error("Panzoom: Container not found");var U=this.option("content")||a.querySelector(".panzoom__content");if(!U)throw new Error("Panzoom: Content not found");this.$content=U;var d,i=this.option("viewport")||a.querySelector(".panzoom__viewport");i||!1===this.option("wrapInner")||((i=document.createElement("div")).classList.add("panzoom__viewport"),(d=i).append.apply(d,f(a.childNodes)),a.appendChild(i));this.$viewport=i||U.parentNode}},{key:"resetValues",value:function(){this.updateRate=this.option("updateRate",/iPhone|iPad|iPod|Android/i.test(navigator.userAgent)?250:24),this.container={width:0,height:0},this.viewport={width:0,height:0},this.content={origHeight:0,origWidth:0,width:0,height:0,x:this.option("x",0),y:this.option("y",0),scale:this.option("baseScale")},this.transform={x:0,y:0,scale:1},this.resetDragPosition()}},{key:"onLoad",value:function(a){this.updateMetrics(),this.panTo({scale:this.option("baseScale"),friction:0}),this.trigger("load",a)}},{key:"onClick",value:function(a){if(!a.defaultPrevented)if(this.option("textSelection")&&window.getSelection().toString().length)a.stopPropagation();else{var U=this.$content.getClientRects()[0];if("ready"!==this.state&&(this.dragPosition.midPoint||Math.abs(U.top-this.dragStart.rect.top)>1||Math.abs(U.left-this.dragStart.rect.left)>1))return a.preventDefault(),void a.stopPropagation();!1!==this.trigger("click",a)&&this.option("zoom")&&"toggleZoom"===this.option("click")&&(a.preventDefault(),a.stopPropagation(),this.zoomWithClick(a))}}},{key:"onWheel",value:function(a){!1!==this.trigger("wheel",a)&&this.option("zoom")&&this.option("wheel")&&this.zoomWithWheel(a)}},{key:"zoomWithWheel",value:function(a){void 0===this.changedDelta&&(this.changedDelta=0);var U=Math.max(-1,Math.min(1,-a.deltaY||-a.deltaX||a.wheelDelta||-a.detail)),d=this.content.scale,i=d*(100+U*this.option("wheelFactor"))/100;if(U<0&&Math.abs(d-this.option("minScale"))<.01||U>0&&Math.abs(d-this.option("maxScale"))<.01?(this.changedDelta+=Math.abs(U),i=d):(this.changedDelta=0,i=Math.max(Math.min(i,this.option("maxScale")),this.option("minScale"))),!(this.changedDelta>this.option("wheelLimit"))&&(a.preventDefault(),i!==d)){var c=this.$content.getBoundingClientRect(),e=a.clientX-c.left,cS=a.clientY-c.top;this.zoomTo(i,{x:e,y:cS})}}},{key:"zoomWithClick",value:function(a){var U=this.$content.getClientRects()[0],d=a.clientX-U.left,i=a.clientY-U.top;this.toggleZoom({x:d,y:i})}},{key:"attachEvents",value:function(){var a=this;this.$content.addEventListener("load",this.onLoad),this.$container.addEventListener("wheel",this.onWheel,{passive:!1}),this.$container.addEventListener("click",this.onClick,{passive:!1}),this.initObserver();var U=new fO(this.$container,{start:function(d,i){if(!a.option("touch"))return!1;if(!(a.velocity.scale<0)){if(!U.currentPointers.length){if(-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(i.target.nodeName))return!1;if(a.option("textSelection")&&function(a,U,d){for(var i=a.childNodes,c=document.createRange(),e=0;e<i.length;e++){var cS=i[e];if(cS.nodeType===Node.TEXT_NODE){c.selectNodeContents(cS);var dA=c.getBoundingClientRect();if(U>=dA.left&&d>=dA.top&&U<=dA.right&&d<=dA.bottom)return cS}}return!1}(i.target,i.clientX,i.clientY))return!1;if(cY(i.target))return!1}return!1!==a.trigger("touchStart",i)&&(a.state="pointerdown",a.resetDragPosition(),a.dragPosition.midPoint=null,a.dragPosition.time=Date.now(),!0)}},move:function(d,i,c){if("pointerdown"===a.state)if(0!=a.trigger("touchMove",c)){if(!(i.length<2&&1==a.option("panOnlyZoomed")&&a.content.width<=a.viewport.width&&a.content.height<=a.viewport.height&&a.transform.scale<=a.option("baseScale"))&&(!(i.length>1)||a.option("zoom")&&!1!==a.option("pinchToZoom"))){c.preventDefault(),c.stopPropagation();var e=cW(d[0],d[1]),cS=cW(i[0],i[1]),dA=cS.clientX-e.clientX,dZ=cS.clientY-e.clientY,ei=dQ(d[0],d[1]),g=dQ(i[0],i[1]),H=ei?g/ei:1;a.dragOffset.x+=dA,a.dragOffset.y+=dZ,a.dragOffset.scale*=H,a.dragOffset.time=Date.now()-a.dragPosition.time;var cZ=1===a.dragStart.scale&&a.option("lockAxis");if(cZ&&!a.lockAxis){if(Math.abs(a.dragOffset.x)<6&&Math.abs(a.dragOffset.y)<6)return;if("xy"===cZ){var b=Math.abs(180*Math.atan2(a.dragOffset.y,a.dragOffset.x)/Math.PI);a.lockAxis=b>45&&b<135?"y":"x"}else a.lockAxis=cZ}if(a.lockAxis&&(a.dragOffset["x"===a.lockAxis?"y":"x"]=0),a.$container.classList.add(a.option("draggingClass")),a.transform.scale===a.option("baseScale")&&"y"===a.lockAxis||(a.dragPosition.x=a.dragStart.x+a.dragOffset.x),a.transform.scale===a.option("baseScale")&&"x"===a.lockAxis||(a.dragPosition.y=a.dragStart.y+a.dragOffset.y),a.dragPosition.scale=a.dragStart.scale*a.dragOffset.scale,i.length>1){var j=cW(U.startPointers[0],U.startPointers[1]),f=j.clientX-a.dragStart.rect.x,F=j.clientY-a.dragStart.rect.y,aU=a.getZoomDelta(a.content.scale*a.dragOffset.scale,f,F),aj=aU.deltaX,gb=aU.deltaY;a.dragPosition.x-=aj,a.dragPosition.y-=gb,a.dragPosition.midPoint=cS}else a.setDragResistance();a.transform={x:a.dragPosition.x,y:a.dragPosition.y,scale:a.dragPosition.scale},a.startAnimation()}}else c.preventDefault()},end:function(i,c){if("pointerdown"===a.state)if(a._dragOffset=d({},a.dragOffset),U.currentPointers.length)a.resetDragPosition();else if(a.state="decel",a.friction=a.option("decelFriction"),a.recalculateTransform(),a.$container.classList.remove(a.option("draggingClass")),!1!==a.trigger("touchEnd",c)&&"decel"===a.state){var e=a.option("minScale");if(a.transform.scale<e)a.zoomTo(e,{friction:.64});else{var cS=a.option("maxScale");if(a.transform.scale-cS>.01){var dA=a.dragPosition.midPoint||i,dZ=a.$content.getClientRects()[0];a.zoomTo(cS,{friction:.64,x:dA.clientX-dZ.left,y:dA.clientY-dZ.top})}else;}}}});this.pointerTracker=U}},{key:"initObserver",value:function(){var a=this;this.resizeObserver||(this.resizeObserver=new gF(function(){a.updateTimer||(a.updateTimer=setTimeout(function(){var U=a.$container.getBoundingClientRect();U.width&&U.height?((Math.abs(U.width-a.container.width)>1||Math.abs(U.height-a.container.height)>1)&&(a.isAnimating()&&a.endAnimation(),a.updateMetrics(),a.panTo({x:a.content.x,y:a.content.y,scale:a.option("baseScale"),friction:0})),a.updateTimer=null):a.updateTimer=null},a.updateRate))}),this.resizeObserver.observe(this.$container))}},{key:"resetDragPosition",value:function(){this.lockAxis=null,this.friction=this.option("friction"),this.velocity={x:0,y:0,scale:0};var a=this.content,U=a.x,i=a.y,c=a.scale;this.dragStart={rect:this.$content.getBoundingClientRect(),x:U,y:i,scale:c},this.dragPosition=d(d({},this.dragPosition),{},{x:U,y:i,scale:c}),this.dragOffset={x:0,y:0,scale:1,time:0}}},{key:"updateMetrics",value:function(a){!0!==a&&this.trigger("beforeUpdate");var U,i=this.$container,c=this.$content,e=this.$viewport,cS=this.$content instanceof HTMLImageElement,dA=this.option("zoom"),dZ=this.option("resizeParent",dA),ei=(U=this.$content,Math.max(parseFloat(U.naturalWidth||0),parseFloat(U.width&&U.width.baseVal&&U.width.baseVal.value||0),parseFloat(U.offsetWidth||0),parseFloat(U.scrollWidth||0))),g=function(a){return Math.max(parseFloat(a.naturalHeight||0),parseFloat(a.height&&a.height.baseVal&&a.height.baseVal.value||0),parseFloat(a.offsetHeight||0),parseFloat(a.scrollHeight||0))}(this.$content);Object.assign(c.style,{width:"",height:"",maxWidth:"",maxHeight:""}),dZ&&Object.assign(e.style,{width:"",height:""});var H=this.option("ratio"),cZ=ei=ec(ei*H),b=g=ec(g*H),j=c.getBoundingClientRect(),f=e.getBoundingClientRect(),F=e==i?f:i.getBoundingClientRect(),aU=Math.max(e.offsetWidth,ec(f.width)),aj=Math.max(e.offsetHeight,ec(f.height)),gb=window.getComputedStyle(e);if(aU-=parseFloat(gb.paddingLeft)+parseFloat(gb.paddingRight),aj-=parseFloat(gb.paddingTop)+parseFloat(gb.paddingBottom),this.viewport.width=aU,this.viewport.height=aj,dA){if(Math.abs(ei-j.width)>.1||Math.abs(g-j.height)>.1){var eX=function(a,U,d,i){var c=Math.min(d/a||0,i/U);return{width:a*c||0,height:U*c||0}}(ei,g,Math.min(ei,j.width),Math.min(g,j.height));cZ=ec(eX.width),b=ec(eX.height)}Object.assign(c.style,{width:"".concat(cZ,"px"),height:"".concat(b,"px"),transform:""})}if(dZ&&(Object.assign(e.style,{width:"".concat(cZ,"px"),height:"".concat(b,"px")}),this.viewport=d(d({},this.viewport),{},{width:cZ,height:b})),cS&&dA&&"function"!=typeof this.options.maxScale){var gF=this.option("maxScale");this.options.maxScale=function(){return this.content.origWidth>0&&this.content.fitWidth>0?this.content.origWidth/this.content.fitWidth:gF}}this.content=d(d({},this.content),{},{origWidth:ei,origHeight:g,fitWidth:cZ,fitHeight:b,width:cZ,height:b,scale:1,isZoomable:dA}),this.container={width:F.width,height:F.height},!0!==a&&this.trigger("afterUpdate")}},{key:"zoomIn",value:function(a){this.zoomTo(this.content.scale+(a||this.option("step")))}},{key:"zoomOut",value:function(a){this.zoomTo(this.content.scale-(a||this.option("step")))}},{key:"toggleZoom",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=this.option("maxScale"),d=this.option("baseScale"),i=this.content.scale>d+.5*(U-d)?d:U;this.zoomTo(i,a)}},{key:"zoomTo",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.option("baseScale"),U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=U.x,i=void 0===d?null:d,c=U.y,e=void 0===c?null:c;a=Math.max(Math.min(a,this.option("maxScale")),this.option("minScale"));var cS=ec(this.content.scale/(this.content.width/this.content.fitWidth),1e7);null===i&&(i=this.content.width*cS*.5),null===e&&(e=this.content.height*cS*.5);var dA=this.getZoomDelta(a,i,e),dZ=dA.deltaX,ei=dA.deltaY;i=this.content.x-dZ,e=this.content.y-ei,this.panTo({x:i,y:e,scale:a,friction:this.option("zoomFriction")})}},{key:"getZoomDelta",value:function(a){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.content.fitWidth*this.content.scale,c=this.content.fitHeight*this.content.scale,e=U>0&&i?U/i:0,cS=d>0&&c?d/c:0,dA=this.content.fitWidth*a,dZ=this.content.fitHeight*a,ei=(dA-i)*e,g=(dZ-c)*cS;return{deltaX:ei,deltaY:g}}},{key:"panTo",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=a.x,d=void 0===U?this.content.x:U,i=a.y,c=void 0===i?this.content.y:i,e=a.scale,cS=a.friction,dA=void 0===cS?this.option("friction"):cS,dZ=a.ignoreBounds,ei=void 0!==dZ&&dZ;if(e=e||this.content.scale||1,!ei){var g=this.getBounds(e),H=g.boundX,cZ=g.boundY;H&&(d=Math.max(Math.min(d,H.to),H.from)),cZ&&(c=Math.max(Math.min(c,cZ.to),cZ.from))}this.friction=dA,this.transform={x:d,y:c,scale:e},dA?(this.state="panning",this.velocity={x:(1/this.friction-1)*(d-this.content.x),y:(1/this.friction-1)*(c-this.content.y),scale:(1/this.friction-1)*(e-this.content.scale)},this.startAnimation()):this.endAnimation()}},{key:"startAnimation",value:function(){var a=this;this.rAF?cancelAnimationFrame(this.rAF):this.trigger("startAnimation"),this.rAF=requestAnimationFrame(function(){return a.animate()})}},{key:"animate",value:function(){var a=this;if(this.setEdgeForce(),this.setDragForce(),this.velocity.x*=this.friction,this.velocity.y*=this.friction,this.velocity.scale*=this.friction,this.content.x+=this.velocity.x,this.content.y+=this.velocity.y,this.content.scale+=this.velocity.scale,this.isAnimating())this.setTransform();else if("pointerdown"!==this.state)return this.endAnimation(),void this.trigger("endAnimation");this.rAF=requestAnimationFrame(function(){return a.animate()})}},{key:"getBounds",value:function(a){var U=this.boundX,d=this.boundY;if(void 0!==U&&void 0!==d)return{boundX:U,boundY:d};U={from:0,to:0},d={from:0,to:0},a=a||this.transform.scale;var i=this.content.fitWidth,c=this.content.fitHeight,e=i*a,cS=c*a,dA=this.viewport.width,dZ=this.viewport.height;if(i<=dA){var ei=.5*(dA-e),g=.5*(e-i);U.from=ec(ei-g),U.to=ec(ei+g)}else U.from=ec(dA-e);if(c<=dZ){var H=.5*(dZ-cS),cZ=.5*(cS-c);d.from=ec(H-cZ),d.to=ec(H+cZ)}else d.from=ec(dZ-e);return{boundX:U,boundY:d}}},{key:"setEdgeForce",value:function(){if("decel"===this.state){var a,U,d,i,c=this.option("bounceForce"),e=this.getBounds(Math.max(this.transform.scale,this.content.scale)),cS=e.boundX,dA=e.boundY;if(cS&&(a=this.content.x<cS.from,U=this.content.x>cS.to),dA&&(d=this.content.y<dA.from,i=this.content.y>dA.to),a||U){var dZ=((a?cS.from:cS.to)-this.content.x)*c,ei=this.content.x+(this.velocity.x+dZ)/this.friction;ei>=cS.from&&ei<=cS.to&&(dZ+=this.velocity.x),this.velocity.x=dZ,this.recalculateTransform()}if(d||i){var g=((d?dA.from:dA.to)-this.content.y)*c,H=this.content.y+(g+this.velocity.y)/this.friction;H>=dA.from&&H<=dA.to&&(g+=this.velocity.y),this.velocity.y=g,this.recalculateTransform()}}}},{key:"setDragResistance",value:function(){if("pointerdown"===this.state){var a,U,d,i,c=this.getBounds(this.dragPosition.scale),e=c.boundX,cS=c.boundY;if(e&&(a=this.dragPosition.x<e.from,U=this.dragPosition.x>e.to),cS&&(d=this.dragPosition.y<cS.from,i=this.dragPosition.y>cS.to),(a||U)&&(!a||!U)){var dA=a?e.from:e.to,dZ=dA-this.dragPosition.x;this.dragPosition.x=dA-.3*dZ}if((d||i)&&(!d||!i)){var ei=d?cS.from:cS.to,g=ei-this.dragPosition.y;this.dragPosition.y=ei-.3*g}}}},{key:"setDragForce",value:function(){"pointerdown"===this.state&&(this.velocity.x=this.dragPosition.x-this.content.x,this.velocity.y=this.dragPosition.y-this.content.y,this.velocity.scale=this.dragPosition.scale-this.content.scale)}},{key:"recalculateTransform",value:function(){this.transform.x=this.content.x+this.velocity.x/(1/this.friction-1),this.transform.y=this.content.y+this.velocity.y/(1/this.friction-1),this.transform.scale=this.content.scale+this.velocity.scale/(1/this.friction-1)}},{key:"isAnimating",value:function(){return!(!this.friction||!(Math.abs(this.velocity.x)>.05||Math.abs(this.velocity.y)>.05||Math.abs(this.velocity.scale)>.05))}},{key:"setTransform",value:function(a){var U,i,c,e,cS;(a?(U=ec(this.transform.x),i=ec(this.transform.y),c=this.transform.scale,this.content=d(d({},this.content),{},{x:U,y:i,scale:c})):(U=ec(this.content.x),i=ec(this.content.y),c=this.content.scale/(this.content.width/this.content.fitWidth),this.content=d(d({},this.content),{},{x:U,y:i})),this.trigger("beforeTransform"),U=ec(this.content.x),i=ec(this.content.y),a&&this.option("zoom"))?(e=ec(this.content.fitWidth*c),cS=ec(this.content.fitHeight*c),this.content.width=e,this.content.height=cS,this.transform=d(d({},this.transform),{},{width:e,height:cS,scale:c}),Object.assign(this.$content.style,{width:"".concat(e,"px"),height:"".concat(cS,"px"),maxWidth:"none",maxHeight:"none",transform:"translate3d(".concat(U,"px, ").concat(i,"px, 0) scale(1)")})):this.$content.style.transform="translate3d(".concat(U,"px, ").concat(i,"px, 0) scale(").concat(c,")");this.trigger("afterTransform")}},{key:"endAnimation",value:function(){cancelAnimationFrame(this.rAF),this.rAF=null,this.velocity={x:0,y:0,scale:0},this.setTransform(!0),this.state="ready",this.handleCursor()}},{key:"handleCursor",value:function(){var a=this.option("draggableClass");a&&this.option("touch")&&(1==this.option("panOnlyZoomed")&&this.content.width<=this.viewport.width&&this.content.height<=this.viewport.height&&this.transform.scale<=this.option("baseScale")?this.$container.classList.remove(a):this.$container.classList.add(a))}},{key:"detachEvents",value:function(){this.$content.removeEventListener("load",this.onLoad),this.$container.removeEventListener("wheel",this.onWheel,{passive:!1}),this.$container.removeEventListener("click",this.onClick,{passive:!1}),this.pointerTracker&&(this.pointerTracker.stop(),this.pointerTracker=null),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"destroy",value:function(){"destroy"!==this.state&&(this.state="destroy",clearTimeout(this.updateTimer),this.updateTimer=null,cancelAnimationFrame(this.rAF),this.rAF=null,this.detachEvents(),this.detachPlugins(),this.resetDragPosition())}}]),i}(bC);bW.version="4.0.0-beta.2",bW.Plugins={};var db=function(a,U){var d=0;return function(){var i=(new Date).getTime();if(!(i-d<U))return d=i,a.apply(void 0,arguments)}},ch=function(){function a(U){c(this,a),this.$container=null,this.$prev=null,this.$next=null,this.carousel=U,this.onRefresh=this.onRefresh.bind(this)}return cS(a,[{key:"option",value:function(a){return this.carousel.option("Navigation.".concat(a))}},{key:"createButton",value:function(a){var U,d=this,i=document.createElement("button");i.setAttribute("title",this.carousel.localize("{{".concat(a.toUpperCase(),"}}")));var c=this.option("classNames.button")+" "+this.option("classNames.".concat(a));return(U=i.classList).add.apply(U,f(c.split(" "))),i.setAttribute("tabindex","0"),i.innerHTML=this.carousel.localize(this.option("".concat(a,"Tpl"))),i.addEventListener("click",function(U){U.preventDefault(),U.stopPropagation(),d.carousel["slide".concat("next"===a?"Next":"Prev")]()}),i}},{key:"build",value:function(){this.$container||(this.$container=document.createElement("div"),this.$container.classList.add(this.option("classNames.main")),this.carousel.$container.appendChild(this.$container)),this.$next||(this.$next=this.createButton("next"),this.$container.appendChild(this.$next)),this.$prev||(this.$prev=this.createButton("prev"),this.$container.appendChild(this.$prev))}},{key:"onRefresh",value:function(){var a=this.carousel.pages.length;a<=1||a>1&&this.carousel.elemDimWidth<this.carousel.wrapDimWidth&&!Number.isInteger(this.carousel.option("slidesPerPage"))?this.cleanup():(this.build(),this.$prev.removeAttribute("disabled"),this.$next.removeAttribute("disabled"),this.carousel.option("infiniteX",this.carousel.option("infinite"))||(this.carousel.page<=0&&this.$prev.setAttribute("disabled",""),this.carousel.page>=a-1&&this.$next.setAttribute("disabled","")))}},{key:"cleanup",value:function(){this.$prev&&this.$prev.remove(),this.$prev=null,this.$next&&this.$next.remove(),this.$next=null,this.$container&&this.$container.remove(),this.$container=null}},{key:"attach",value:function(){this.carousel.on("refresh change",this.onRefresh)}},{key:"detach",value:function(){this.carousel.off("refresh change",this.onRefresh),this.cleanup()}}]),a}();ch.defaults={prevTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 3l-9 9 9 9"/></svg>',nextTpl:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M9 3l9 9-9 9"/></svg>',classNames:{main:"carousel__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}};var h=function(){function a(U){c(this,a),this.carousel=U,this.$list=null,this.events={change:this.onChange.bind(this),refresh:this.onRefresh.bind(this)}}return cS(a,[{key:"buildList",value:function(){var a=this;if(!(this.carousel.pages.length<2)){var U=document.createElement("ol");return U.classList.add("carousel__dots"),U.addEventListener("click",function(U){if("page"in U.target.dataset){U.preventDefault(),U.stopPropagation();var d=parseInt(U.target.dataset.page,10),i=a.carousel;d!==i.page&&(i.pages.length<3&&i.option("infinite")?i[0==d?"slidePrev":"slideNext"]():i.slideTo(d))}}),this.$list=U,this.carousel.$container.appendChild(U),this.carousel.$container.classList.add("has-dots"),U}}},{key:"removeList",value:function(){this.$list&&(this.$list.parentNode.removeChild(this.$list),this.$list=null),this.carousel.$container.classList.remove("has-dots")}},{key:"rebuildDots",value:function(){var a=this,U=this.$list,d=!!U,i=this.carousel.pages.length;if(i<2)d&&this.removeList();else{d||(U=this.buildList());var c=this.$list.children.length;if(c>i)for(var e=i;e<c;e++)this.$list.removeChild(this.$list.lastChild);else{for(var cS=function(U){var d=document.createElement("li");d.classList.add("carousel__dot"),d.dataset.page=U,d.setAttribute("role","button"),d.setAttribute("tabindex","0"),d.setAttribute("title",a.carousel.localize("{{GOTO}}",[["%d",U+1]])),d.addEventListener("keydown",function(a){var U,i=a.code;"Enter"===i||"NumpadEnter"===i?U=d:"ArrowRight"===i?U=d.nextSibling:"ArrowLeft"===i&&(U=d.previousSibling),U&&U.click()}),a.$list.appendChild(d)},dA=c;dA<i;dA++)cS(dA);this.setActiveDot()}}}},{key:"setActiveDot",value:function(){if(this.$list){this.$list.childNodes.forEach(function(a){a.classList.remove("is-selected")});var a=this.$list.childNodes[this.carousel.page];a&&a.classList.add("is-selected")}}},{key:"onChange",value:function(){this.setActiveDot()}},{key:"onRefresh",value:function(){this.rebuildDots()}},{key:"attach",value:function(){this.carousel.on(this.events)}},{key:"detach",value:function(){this.removeList(),this.carousel.off(this.events),this.carousel=null}}]),a}(),k=function(){function a(U){c(this,a),this.carousel=U,this.selectedIndex=null,this.friction=0,this.onNavReady=this.onNavReady.bind(this),this.onNavClick=this.onNavClick.bind(this),this.onNavCreateSlide=this.onNavCreateSlide.bind(this),this.onTargetChange=this.onTargetChange.bind(this)}return cS(a,[{key:"addAsTargetFor",value:function(a){this.target=this.carousel,this.nav=a,this.attachEvents()}},{key:"addAsNavFor",value:function(a){this.target=a,this.nav=this.carousel,this.attachEvents()}},{key:"attachEvents",value:function(){this.nav.options.initialSlide=this.target.options.initialPage,this.nav.on("ready",this.onNavReady),this.nav.on("createSlide",this.onNavCreateSlide),this.nav.on("Panzoom.click",this.onNavClick),this.target.on("change",this.onTargetChange),this.target.on("Panzoom.afterUpdate",this.onTargetChange)}},{key:"onNavReady",value:function(){this.onTargetChange(!0)}},{key:"onNavClick",value:function(a,U,d){var i=d.target.closest(".carousel__slide");if(i){d.stopPropagation();var c=parseInt(i.dataset.index,10),e=this.target.findPageForSlide(c);this.target.page!==e&&this.target.slideTo(e,{friction:this.friction}),this.markSelectedSlide(c)}}},{key:"onNavCreateSlide",value:function(a,U){U.index===this.selectedIndex&&this.markSelectedSlide(U.index)}},{key:"onTargetChange",value:function(){var a=this.target.pages[this.target.page].indexes[0],U=this.nav.findPageForSlide(a);this.nav.slideTo(U),this.markSelectedSlide(a)}},{key:"markSelectedSlide",value:function(a){this.selectedIndex=a,f(this.nav.slides).filter(function(a){return a.$el&&a.$el.classList.remove("is-nav-selected")});var U=this.nav.slides[a];U&&U.$el&&U.$el.classList.add("is-nav-selected")}},{key:"attach",value:function(a){var U=a.options.Sync;(U.target||U.nav)&&(U.target?this.addAsNavFor(U.target):U.nav&&this.addAsTargetFor(U.nav),this.friction=U.friction)}},{key:"detach",value:function(){this.nav&&(this.nav.off("ready",this.onNavReady),this.nav.off("Panzoom.click",this.onNavClick),this.nav.off("createSlide",this.onNavCreateSlide)),this.target&&(this.target.off("Panzoom.afterUpdate",this.onTargetChange),this.target.off("change",this.onTargetChange))}}]),a}();k.defaults={friction:.92};var l={Navigation:ch,Dots:h,Sync:k},m={slides:[],preload:0,slidesPerPage:"auto",initialPage:null,initialSlide:null,friction:.92,center:!0,infinite:!0,fill:!0,dragFree:!1,classNames:{viewport:"carousel__viewport",track:"carousel__track",slide:"carousel__slide",slideSelected:"is-selected"},l10n:{NEXT:"Next slide",PREV:"Previous slide",GOTO:"Go to slide %d"}},n=function(a){dZ(i,a);var U=b(i);function i(a){var d,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(c(this,i),e=eX(!0,{},m,e),(d=U.call(this,e)).state="init",d.$container=a,!(d.$container instanceof HTMLElement))throw new Error("No root element provided");return d.slideNext=db(d.slideNext.bind(H(d)),250),d.slidePrev=db(d.slidePrev.bind(H(d)),250),d.init(),d}return cS(i,[{key:"init",value:function(){this.pages=[],this.page=this.pageIndex=null,this.prevPage=this.prevPageIndex=null,this.attachPlugins(i.Plugins),this.trigger("init"),this.initLayout(),this.initSlides(),this.updateMetrics(),this.$track.style.transform="translate3d(".concat(-1*this.pages[this.page].left,"px, 0px, 0) scale(1)"),this.manageSlideVisiblity(),this.initPanzoom(),this.state="ready",this.trigger("ready")}},{key:"initLayout",value:function(){var a,U,d=this.option("classNames");(this.$viewport=this.option("viewport")||this.$container.querySelector("."+d.viewport),this.$viewport)||(this.$viewport=document.createElement("div"),this.$viewport.classList.add(d.viewport),(a=this.$viewport).append.apply(a,f(this.$container.childNodes)),this.$container.appendChild(this.$viewport));(this.$track=this.option("track")||this.$container.querySelector("."+d.track),this.$track)||(this.$track=document.createElement("div"),this.$track.classList.add(d.track),(U=this.$track).append.apply(U,f(this.$viewport.childNodes)),this.$viewport.appendChild(this.$track))}},{key:"initSlides",value:function(){var a=this;this.slides=[],this.$viewport.querySelectorAll("."+this.option("classNames.slide")).forEach(function(U){var d={$el:U,isDom:!0};a.slides.push(d),a.trigger("createSlide",d,a.slides.length)}),Array.isArray(this.options.slides)&&(this.slides=eX(!0,f(this.slides),this.options.slides))}},{key:"updateMetrics",value:function(){var a,U=this,i=0,c=[];this.slides.forEach(function(d,e){var cS=d.$el,dA=d.isDom||!a?U.getSlideMetrics(cS):a;d.index=e,d.width=dA,d.left=i,a=dA,i+=dA,c.push(e)});var e=Math.max(this.$track.offsetWidth,ec(this.$track.getBoundingClientRect().width)),cS=window.getComputedStyle(this.$track);e-=parseFloat(cS.paddingLeft)+parseFloat(cS.paddingRight),this.contentWidth=i,this.viewportWidth=e;var dA=[],dZ=this.option("slidesPerPage");if(Number.isInteger(dZ)&&i>e)for(var ei=0;ei<this.slides.length;ei+=dZ)dA.push({indexes:c.slice(ei,ei+dZ),slides:this.slides.slice(ei,ei+dZ)});else for(var g=0,H=0,cZ=0;cZ<this.slides.length;cZ+=1){var b=this.slides[cZ];(!dA.length||H+b.width>e)&&(dA.push({indexes:[],slides:[]}),g=dA.length-1,H=0),H+=b.width,dA[g].indexes.push(cZ),dA[g].slides.push(b)}var j=this.option("center"),F=this.option("fill");dA.forEach(function(a,d){a.index=d,a.width=a.slides.reduce(function(a,U){return a+U.width},0),a.left=a.slides[0].left,j&&(a.left+=.5*(e-a.width)*-1),F&&!U.option("infiniteX",U.option("infinite"))&&i>e&&(a.left=Math.max(a.left,0),a.left=Math.min(a.left,i-e))});var aU,aj=[];dA.forEach(function(a){var U=d({},a);aU&&U.left===aU.left?(aU.width+=U.width,aU.slides=[].concat(f(aU.slides),f(U.slides)),aU.indexes=[].concat(f(aU.indexes),f(U.indexes))):(U.index=aj.length,aU=U,aj.push(U))}),this.pages=aj;var gb=this.page;if(null===gb){var eX=this.option("initialSlide");gb=null!==eX?this.findPageForSlide(eX):this.option("initialPage",0),aj[gb]||(gb=aj.length&&gb>aj.length?aj[aj.length-1].index:0),this.page=gb,this.pageIndex=gb}this.updatePanzoom(),this.trigger("refresh")}},{key:"getSlideMetrics",value:function(a){if(!a){var U,d=this.slides[0];if((a=document.createElement("div")).dataset.isTestEl=1,a.style.visibility="hidden",a.classList.add(this.option("classNames.slide")),d.customClass)(U=a.classList).add.apply(U,f(d.customClass.split(" ")));this.$track.prepend(a)}var i=Math.max(a.offsetWidth,ec(a.getBoundingClientRect().width)),c=a.currentStyle||window.getComputedStyle(a);return i=i+(parseFloat(c.marginLeft)||0)+(parseFloat(c.marginRight)||0),a.dataset.isTestEl&&a.remove(),i}},{key:"findPageForSlide",value:function(a){var U=this.pages.find(function(U){return U.indexes.indexOf(a)>-1});return U?U.index:null}},{key:"slideNext",value:function(){this.slideTo(this.pageIndex+1)}},{key:"slidePrev",value:function(){this.slideTo(this.pageIndex-1)}},{key:"slideTo",value:function(a){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},d=U.x,i=void 0===d?-1*this.setPage(a,!0):d,c=U.y,e=void 0===c?0:c,cS=U.friction,dA=void 0===cS?this.option("friction"):cS;this.Panzoom.content.x===i&&!this.Panzoom.velocity.x&&dA||(this.Panzoom.panTo({x:i,y:e,friction:dA,ignoreBounds:!0}),"ready"===this.state&&"ready"===this.Panzoom.state&&this.trigger("settle"))}},{key:"initPanzoom",value:function(){var a=this;this.Panzoom&&this.Panzoom.destroy();var U=eX(!0,{},{content:this.$track,wrapInner:!1,resizeParent:!1,zoom:!1,click:!1,lockAxis:"x",x:-1*this.pages[this.page].left,centerOnStart:!1,textSelection:function(){return a.option("textSelection",!1)},panOnlyZoomed:function(){return this.content.width<=this.viewport.width}},this.option("Panzoom"));this.Panzoom=new bW(this.$container,U),this.Panzoom.on({"*":function(U){for(var d=arguments.length,i=new Array(d>1?d-1:0),c=1;c<d;c++)i[c-1]=arguments[c];return a.trigger.apply(a,["Panzoom.".concat(U)].concat(i))},afterUpdate:function(){a.updatePage()},beforeTransform:this.onBeforeTransform.bind(this),touchEnd:this.onTouchEnd.bind(this),endAnimation:function(){a.trigger("settle")}}),this.updateMetrics(),this.manageSlideVisiblity()}},{key:"updatePanzoom",value:function(){this.Panzoom&&(this.Panzoom.content=d(d({},this.Panzoom.content),{},{fitWidth:this.contentWidth,origWidth:this.contentWidth,width:this.contentWidth}),this.pages.length>1&&this.option("infiniteX",this.option("infinite"))?this.Panzoom.boundX=null:this.Panzoom.boundX={from:-1*this.pages[this.pages.length-1].left,to:-1*this.pages[0].left},this.option("infiniteY",this.option("infinite"))?this.Panzoom.boundY=null:this.Panzoom.boundY={from:0,to:0},this.Panzoom.handleCursor())}},{key:"manageSlideVisiblity",value:function(){var a=this,U=this.contentWidth,d=this.viewportWidth,i=this.Panzoom?-1*this.Panzoom.content.x:this.pages[this.page].left,c=this.option("preload"),e=this.option("infiniteX",this.option("infinite")),cS=parseFloat(window.getComputedStyle(this.$viewport,null).getPropertyValue("padding-left")),dA=parseFloat(window.getComputedStyle(this.$viewport,null).getPropertyValue("padding-right"));this.slides.forEach(function(dZ){var ei,g,H=0;ei=i-cS,g=i+d+dA,ei-=c*(d+cS+dA),g+=c*(d+cS+dA);var cZ=dZ.left+dZ.width>ei&&dZ.left<g;ei=i+U-cS,g=i+U+d+dA,ei-=c*(d+cS+dA);var b=e&&dZ.left+dZ.width>ei&&dZ.left<g;ei=i-U-cS,g=i-U+d+dA,ei-=c*(d+cS+dA);var j=e&&dZ.left+dZ.width>ei&&dZ.left<g;b||cZ||j?(a.createSlideEl(dZ),cZ&&(H=0),b&&(H=-1),j&&(H=1),dZ.left+dZ.width>i&&dZ.left<=i+d+dA&&(H=0)):a.removeSlideEl(dZ),dZ.hasDiff=H});var dZ=0,ei=0;this.slides.forEach(function(a,d){var i=0;a.$el?(d!==dZ||a.hasDiff?i=ei+a.hasDiff*U:ei=0,a.$el.style.left=Math.abs(i)>.1?"".concat(ei+a.hasDiff*U,"px"):"",dZ++):ei+=a.width}),this.markSelectedSlides()}},{key:"createSlideEl",value:function(a){if(a){if(!a.$el){var U,d=document.createElement("div");if(d.dataset.index=a.index,d.classList.add(this.option("classNames.slide")),a.customClass)(U=d.classList).add.apply(U,f(a.customClass.split(" ")));a.html&&(d.innerHTML=a.html);var i=[];this.slides.forEach(function(a,U){a.$el&&i.push(U)});var c=a.index,e=null;if(i.length){var cS=i.reduce(function(a,U){return Math.abs(U-c)<Math.abs(a-c)?U:a});e=this.slides[cS]}return this.$track.insertBefore(d,e&&e.$el?e.index<a.index?e.$el.nextSibling:e.$el:null),a.$el=d,this.trigger("createSlide",a,c),a}var dA;parseInt(a.$el.dataset.index,10)!==a.index&&(a.$el.dataset.index=a.index,a.$el.querySelectorAll("[data-lazy-src]").forEach(function(a){var U=a.dataset.lazySrc;a instanceof HTMLImageElement?a.src=U:a.style.backgroundImage="url('".concat(U,"')")}),(dA=a.$el.dataset.lazySrc)&&(a.$el.style.backgroundImage="url('".concat(dA,"')")),a.state="ready")}}},{key:"removeSlideEl",value:function(a){a.$el&&!a.isDom&&(this.trigger("removeSlide",a),a.$el.remove(),a.$el=null)}},{key:"markSelectedSlides",value:function(){var a=this,U=this.option("classNames.slideSelected"),d="aria-hidden";this.slides.forEach(function(i,c){var e=i.$el;if(e){var cS=a.pages[a.page];cS&&cS.indexes&&cS.indexes.indexOf(c)>-1?(U&&!e.classList.contains(U)&&(e.classList.add(U),a.trigger("selectSlide",i)),e.removeAttribute(d)):(U&&e.classList.contains(U)&&(e.classList.remove(U),a.trigger("unselectSlide",i)),e.setAttribute(d,!0))}})}},{key:"updatePage",value:function(){this.updateMetrics(),this.slideTo(this.page,{friction:0})}},{key:"onBeforeTransform",value:function(){this.option("infiniteX",this.option("infinite"))&&this.manageInfiniteTrack(),this.manageSlideVisiblity()}},{key:"manageInfiniteTrack",value:function(){var a=this.contentWidth,U=this.viewportWidth;if(!(!this.option("infiniteX",this.option("infinite"))||this.pages.length<2||a<U)){var d=this.Panzoom,i=!1;return d.content.x<-1*(a-U)&&(d.content.x+=a,this.pageIndex=this.pageIndex-this.pages.length,i=!0),d.content.x>U&&(d.content.x-=a,this.pageIndex=this.pageIndex+this.pages.length,i=!0),i&&"pointerdown"===d.state&&d.resetDragPosition(),i}}},{key:"onTouchEnd",value:function(a,U){var d=this.option("dragFree");if(!d&&this.pages.length>1&&a.dragOffset.time<350&&Math.abs(a.dragOffset.y)<1&&Math.abs(a.dragOffset.x)>5)this[a.dragOffset.x<0?"slideNext":"slidePrev"]();else if(d){var i=j(this.getPageFromPosition(-1*a.transform.x),2)[1];this.setPage(i)}else this.slideToClosest()}},{key:"slideToClosest",value:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},U=this.getPageFromPosition(-1*this.Panzoom.content.x),d=j(U,2),i=d[1];this.slideTo(i,a)}},{key:"getPageFromPosition",value:function(a){var U=this.pages.length;this.option("center")&&(a+=.5*this.viewportWidth);var d=Math.floor(a/this.contentWidth);a-=d*this.contentWidth;var i=this.slides.find(function(U){return U.left<=a&&U.left+U.width>a});if(i){var c=this.findPageForSlide(i.index);return[c,c+d*U]}return[0,0]}},{key:"setPage",value:function(a,U){var d=0,i=parseInt(a,10)||0,c=this.page,e=this.pageIndex,cS=this.pages.length,dA=this.contentWidth,dZ=this.viewportWidth;if(a=(i%cS+cS)%cS,this.option("infiniteX",this.option("infinite"))&&dA>dZ){var ei=Math.floor(i/cS)||0,g=dA;if(d=this.pages[a].left+ei*g,!0===U&&cS>2){var H=-1*this.Panzoom.content.x,cZ=d-g,b=d+g,j=Math.abs(H-d),f=Math.abs(H-cZ),F=Math.abs(H-b);F<j&&F<=f?(d=b,i+=cS):f<j&&f<F&&(d=cZ,i-=cS)}}else a=i=Math.max(0,Math.min(i,cS-1)),d=this.pages[a].left;return this.page=a,this.pageIndex=i,null!==c&&a!==c&&(this.prevPage=c,this.prevPageIndex=e,this.trigger("change",a,c)),d}},{key:"destroy",value:function(){var a=this;this.state="destroy",this.slides.forEach(function(U){a.removeSlideEl(U)}),this.slides=[],this.Panzoom.destroy(),this.detachPlugins()}}]),i}(bC);n.version="4.0.0-beta.2",n.Plugins=l;var o=!!("undefined"!=typeof window&&window.document&&window.document.createElement&&window.document.body),p=function(){function a(U){c(this,a),this.fancybox=U,this.viewport=null,this.pendingUpdate=null;for(var d=0,i=["onReady","onResize","onTouchstart","onTouchmove"];d<i.length;d++){var e=i[d];this[e]=this[e].bind(this)}}return cS(a,[{key:"onReady",value:function(){var a=window.visualViewport;a&&(this.viewport=a,this.startY=0,a.addEventListener("resize",this.onResize),this.updateViewport()),window.addEventListener("touchstart",this.onTouchstart,{passive:!1}),window.addEventListener("touchmove",this.onTouchmove,{passive:!1})}},{key:"onResize",value:function(){this.updateViewport()}},{key:"updateViewport",value:function(){var a=this.fancybox,U=this.viewport,d=U.scale||1,i=a.$container;if(i){var c="",e="",cS="";d-1>.1&&(c="".concat(U.width*d,"px"),e="".concat(U.height*d,"px"),cS="translate3d(".concat(U.offsetLeft,"px, ").concat(U.offsetTop,"px, 0) scale(").concat(1/d,")")),i.style.width=c,i.style.height=e,i.style.transform=cS}}},{key:"onTouchstart",value:function(a){this.startY=a.touches?a.touches[0].screenY:a.screenY}},{key:"onTouchmove",value:function(a){var U=this.startY,d=window.innerWidth/window.document.documentElement.clientWidth;if(!(a.touches.length>1||1!==d)){var i=a.target,c=cY(i);if(c){var e=window.getComputedStyle(c),cS=parseInt(e.getPropertyValue("height"),10),dA=a.touches?a.touches[0].screenY:a.screenY,dZ=U<=dA&&0===c.scrollTop,ei=U>=dA&&c.scrollHeight-c.scrollTop===cS;(dZ||ei)&&a.preventDefault()}else a.preventDefault()}}},{key:"cleanup",value:function(){this.pendingUpdate&&(cancelAnimationFrame(this.pendingUpdate),this.pendingUpdate=null);var a=this.viewport;a&&(a.removeEventListener("resize",this.onResize),this.viewport=null),window.removeEventListener("touchstart",this.onTouchstart,!1),window.removeEventListener("touchmove",this.onTouchmove,!1)}},{key:"attach",value:function(){this.fancybox.on("initLayout",this.onReady)}},{key:"detach",value:function(){this.fancybox.off("initLayout",this.onReady),this.cleanup()}}]),a}(),q=function(){function a(U){c(this,a),this.fancybox=U,this.$container=null,this.state="init";for(var d=0,i=["onPrepare","onClosing","onKeydown"];d<i.length;d++){var e=i[d];this[e]=this[e].bind(this)}this.events={prepare:this.onPrepare,closing:this.onClosing,keydown:this.onKeydown}}return cS(a,[{key:"onPrepare",value:function(){this.getSlides().length<this.fancybox.option("Thumbs.minSlideCount")?this.state="disabled":!0===this.fancybox.option("Thumbs.autoStart")&&this.fancybox.Carousel.Panzoom.content.height>=this.fancybox.option("Thumbs.minScreenHeight")&&this.build()}},{key:"onClosing",value:function(){this.Carousel&&this.Carousel.Panzoom.detachEvents()}},{key:"onKeydown",value:function(a,U){U===a.option("Thumbs.key")&&this.toggle()}},{key:"build",value:function(){var a=this;if(!this.$container){var U=document.createElement("div");U.classList.add("fancybox__thumbs"),this.fancybox.$carousel.parentNode.insertBefore(U,this.fancybox.$carousel.nextSibling),this.Carousel=new n(U,eX(!0,{Dots:!1,Navigation:!1,Sync:{friction:0},infinite:!1,center:!0,fill:!0,dragFree:!0,slidesPerPage:1,preload:1},this.fancybox.option("Thumbs.Carousel"),{Sync:{target:this.fancybox.Carousel},slides:this.getSlides()})),this.Carousel.Panzoom.on("wheel",function(U,d){d.preventDefault(),a.fancybox[d.deltaY<0?"prev":"next"]()}),this.$container=U,this.state="visible"}}},{key:"getSlides",value:function(){var a,U=[],d=aj(this.fancybox.items);try{for(d.s();!(a=d.n()).done;){var i=a.value,c=i.thumb;c&&U.push({html:'<div class="fancybox__thumb" style="background-image:url(\''.concat(c,"')\"></div>"),customClass:"has-thumb has-".concat(i.type||"image")})}}catch(a){d.e(a)}finally{d.f()}return U}},{key:"toggle",value:function(){return"visible"===this.state?(this.Carousel.Panzoom.detachEvents(),this.$container.style.display="none",void(this.state="hidden")):"hidden"===this.state?(this.$container.style.display="",this.Carousel.Panzoom.attachEvents(),void(this.state="visible")):void this.build()}},{key:"cleanup",value:function(){this.Carousel&&(this.Carousel.destroy(),this.Carousel=null),this.$container&&(this.$container.remove(),this.$container=null),this.state="init"}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events),this.cleanup()}}]),a}();q.defaults={minSlideCount:2,minScreenHeight:500,autoStart:!0,key:"t"};var r=function(a){return Object.entries(a).map(function(a){return a.map(encodeURIComponent).join("=")}).join("&")},s=function(){function a(U){c(this,a),this.fancybox=U;for(var d=0,i=["onInit","onReady","onCreateSlide","onRemoveSlide","onSelectSlide","onUnselectSlide","onRefresh","onMessage"];d<i.length;d++){var e=i[d];this[e]=this[e].bind(this)}this.events={init:this.onInit,ready:this.onReady,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide,"Carousel.selectSlide":this.onSelectSlide,"Carousel.unselectSlide":this.onUnselectSlide,"Carousel.refresh":this.onRefresh}}return cS(a,[{key:"onInit",value:function(){var a,U=aj(this.fancybox.items);try{for(U.s();!(a=U.n()).done;){var d=a.value;this.processType(d)}}catch(a){U.e(a)}finally{U.f()}}},{key:"processType",value:function(a){if(a.html)return a.src=a.html,a.type="html",void delete a.html;var U=a.src||"",d=a.type||this.fancybox.options.type,i=null;if(!U||"string"==typeof U){if(i=U.match(/(?:youtube\.com|youtu\.be|youtube\-nocookie\.com)\/(?:watch\?(?:.*&)?v=|v\/|u\/|embed\/?)?(videoseries\?list=(?:.*)|[\w-]{11}|\?listType=(?:.*)&list=(?:.*))(?:.*)/i)){var c=r(this.fancybox.option("Html.youtube")),e=encodeURIComponent(i[1]);a.videoId=e,a.src="https://www.youtube-nocookie.com/embed/".concat(e,"?").concat(c),a.thumb=a.thumb||"https://i.ytimg.com/vi/".concat(e,"/mqdefault.jpg"),a.vendor="youtube",d="video"}else if(i=U.match(/^.+vimeo.com\/(?:\/)?([\d]+)(.*)?/)){var cS=r(this.fancybox.option("Html.vimeo")),dA=encodeURIComponent(i[1]);a.videoId=dA,a.src="https://player.vimeo.com/video/".concat(dA,"?").concat(cS),a.vendor="vimeo",d="video"}else(i=U.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:(?:(?:maps\/(?:place\/(?:.*)\/)?\@(.*),(\d+.?\d+?)z))|(?:\?ll=))(.*)?/i))?(a.src="//maps.google.".concat(i[1],"/?ll=").concat((i[2]?i[2]+"&z="+Math.floor(i[3])+(i[4]?i[4].replace(/^\//,"&"):""):i[4]+"").replace(/\?/,"&"),"&output=").concat(i[4]&&i[4].indexOf("layer=c")>0?"svembed":"embed"),d="map"):(i=U.match(/(?:maps\.)?google\.([a-z]{2,3}(?:\.[a-z]{2})?)\/(?:maps\/search\/)(.*)/i))&&(a.src="//maps.google.".concat(i[1],"/maps?q=").concat(i[2].replace("query=","q=").replace("api=1",""),"&output=embed"),d="map");d||("#"===U.charAt(0)?d="inline":(i=U.match(/\.(mp4|mov|ogv|webm)((\?|#).*)?$/i))?(d="html5video",a.format=a.format||"video/"+("ogv"===i[1]?"ogg":i[1])):U.match(/(^data:image\/[a-z0-9+\/=]*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp|svg|ico)((\?|#).*)?$)/i)?d="image":U.match(/\.(pdf)((\?|#).*)?$/i)&&(d="pdf")),a.type=d||this.fancybox.option("defaultType","image"),"html5video"!==d&&"video"!==d||(a.video=eX({},this.fancybox.option("Html.video"),a.video),a.width&&a.height?a.ratio=parseFloat(a.width)/parseFloat(a.height):a.ratio=a.ratio||a.video.ratio)}}},{key:"onReady",value:function(){var a=this;this.fancybox.Carousel.slides.forEach(function(U){U.$el&&(a.setContent(U),U.index===a.fancybox.getSlide().index&&a.playVideo(U))})}},{key:"onCreateSlide",value:function(a,U,d){"ready"===this.fancybox.state&&this.setContent(d)}},{key:"loadInlineContent",value:function(a){var U;if(a.src instanceof HTMLElement)U=a.src;else if("string"==typeof a.src){var d=a.src.split("#",2),i=2===d.length&&""===d[0]?d[1]:d[0];U=document.getElementById(i)}if(U){if("clone"===a.type||U.$placeHolder){var c=(U=U.cloneNode(!0)).getAttribute("id");c=c?"".concat(c,"--clone"):"clone-".concat(this.fancybox.id,"-").concat(a.index),U.setAttribute("id",c)}else{var e=document.createElement("div");e.classList.add("fancybox-placeholder"),U.parentNode.insertBefore(e,U),U.$placeHolder=e}this.fancybox.setContent(a,U)}else this.fancybox.setError(a,"{{ELEMENT_NOT_FOUND}}")}},{key:"loadAjaxContent",value:function(a){var U=this.fancybox,d=new XMLHttpRequest;U.showLoading(a),d.onreadystatechange=function(){d.readyState===XMLHttpRequest.DONE&&"ready"===U.state&&(U.hideLoading(a),200===d.status?U.setContent(a,d.responseText):U.setError(a,404===d.status?"{{AJAX_NOT_FOUND}}":"{{AJAX_FORBIDDEN}}"))},d.open("GET",a.src),d.send(a.ajax||null),a.xhr=d}},{key:"loadIframeContent",value:function(a){var U=this,d=this.fancybox,i=document.createElement("iframe");if(i.className="fancybox__iframe",i.setAttribute("id","fancybox__iframe_".concat(d.id,"_").concat(a.index)),i.setAttribute("allow","autoplay; fullscreen"),i.setAttribute("scrolling","auto"),a.$iframe=i,"iframe"!==a.type||!1===a.preload)return i.setAttribute("src",a.src),void this.fancybox.setContent(a,i);d.showLoading(a);var c=document.createElement("div");c.style.visibility="hidden",this.fancybox.setContent(a,c),c.appendChild(i),i.onerror=function(){d.setError(a,"{{IFRAME_ERROR}}")},i.onload=function(){d.hideLoading(a);var c=!1;"yes"!==i.dataset.ready&&(i.dataset.ready="yes",c=!0),i.src.length&&(i.parentNode.style.visibility="",!1!==a.autoSize&&U.autoSizeIframe(i),c&&d.revealContent(a))},i.setAttribute("src",a.src)}},{key:"setAspectRatio",value:function(a){var U=a.ratio;if(U&&a.$content){a.$content.style.maxWidth="",a.$content.style.maxHeight="";var d=a.$content.offsetWidth,i=a.$content.offsetHeight,c=a.width,e=a.height;if(c&&e&&(d>c||i>e)){var cS=Math.min(c/d,e/i);d*=cS,i*=cS}U<d/i?d=i*U:i=d/U,a.$content.style.maxWidth="".concat(d,"px"),a.$content.style.maxHeight="".concat(i,"px")}}},{key:"autoSizeIframe",value:function(a){if(a.dataset&&"yes"===a.dataset.ready){var U=a.parentNode.style;U.flex="1 1 auto",U.width="",U.height="";try{var d=a.contentWindow.document,i=d.getElementsByTagName("html")[0],c=d.body,e=window.getComputedStyle(a.parentNode),cS=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),dA=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom);c.style.overflow="hidden";var dZ=i.scrollWidth;U.width="".concat(dZ+cS,"px"),c.style.overflow="",U.flex="",U.flexShrink="0",U.height="".concat(c.scrollHeight,"px");var ei=i.scrollHeight;U.height="".concat(ei+dA,"px")}catch(a){U=""}}}},{key:"onRefresh",value:function(a,U){var d=this;U.slides.forEach(function(a){a.$el&&(a.$iframe&&!1!==a.autoSize&&d.autoSizeIframe(a.$iframe),a.ratio&&d.setAspectRatio(a))})}},{key:"setContent",value:function(a){if(a&&!a.isDom){switch(a.type){case"html":this.fancybox.setContent(a,a.src);break;case"html5video":this.fancybox.setContent(a,this.fancybox.option("Html.html5video.tpl").replace(/\{\{src\}\}/gi,a.src).replace("{{format}}",a.format||a.html5video&&a.html5video.format||"").replace("{{poster}}",a.thumb||""));break;case"inline":case"clone":this.loadInlineContent(a);break;case"ajax":this.loadAjaxContent(a);break;case"iframe":case"pdf":case"video":case"map":this.loadIframeContent(a)}a.ratio&&this.setAspectRatio(a)}}},{key:"onSelectSlide",value:function(a,U,d){"ready"===a.state&&this.playVideo(d)}},{key:"playVideo",value:function(a){if("html5video"===a.type){var U=a.$el.querySelector("video");if(U)try{U.play()}catch(a){}}if("video"===a.type&&a.$iframe&&a.$iframe.contentWindow){!function U(){if("done"===a.state&&a.$iframe&&a.$iframe.contentWindow){var d;if(a.$iframe.isReady)return a.video&&a.video.autoplay&&(d="youtube"==a.vendor?{event:"command",func:"playVideo"}:{method:"play",value:"true"}),void(d&&a.$iframe.contentWindow.postMessage(JSON.stringify(d),"*"));"youtube"===a.vendor&&(d={event:"listening",id:a.$iframe.getAttribute("id")},a.$iframe.contentWindow.postMessage(JSON.stringify(d),"*")),a.poller=setTimeout(U,250)}}()}}},{key:"onUnselectSlide",value:function(a,U,d){if("html5video"!==d.type){var i=!1;"vimeo"==d.vendor?i={method:"pause",value:"true"}:"youtube"===d.vendor&&(i={event:"command",func:"pauseVideo"}),i&&d.$iframe&&d.$iframe.contentWindow&&d.$iframe.contentWindow.postMessage(JSON.stringify(i),"*"),clearTimeout(d.poller)}else try{d.$el.querySelector("video").pause()}catch(a){}}},{key:"onRemoveSlide",value:function(a,U,d){d.xhr&&(d.xhr.abort(),d.xhr=null),d.$iframe&&(d.$iframe.onload=d.$iframe.onerror=null,d.$iframe.src="//about:blank",d.$iframe=null);var i=d.$content;"inline"===d.type&&i&&(i.classList.remove("fancybox__content"),"none"!==i.style.display&&(i.style.display="none"),d.$closeButton&&(d.$closeButton.remove(),d.$closeButton=null));var c=i&&i.$placeHolder;c&&(c.parentNode.insertBefore(i,c),c.remove(),i.$placeHolder=null)}},{key:"onMessage",value:function(a){try{var U=JSON.parse(a.data);if("https://player.vimeo.com"===a.origin){if("ready"===U.event){var d,i=aj(document.getElementsByClassName("fancybox__iframe"));try{for(i.s();!(d=i.n()).done;){var c=d.value;c.contentWindow===a.source&&(c.isReady=1)}}catch(a){i.e(a)}finally{i.f()}}}else"https://www.youtube-nocookie.com"===a.origin&&"onReady"===U.event&&(document.getElementById(U.id).isReady=1)}catch(a){}}},{key:"attach",value:function(){this.fancybox.on(this.events),window.addEventListener("message",this.onMessage,!1)}},{key:"detach",value:function(){this.fancybox.off(this.events),window.removeEventListener("message",this.onMessage,!1)}}]),a}();s.defaults={video:{autoplay:!0,ratio:16/9},youtube:{autohide:1,fs:1,rel:0,hd:1,wmode:"transparent",enablejsapi:1,html5:1},vimeo:{hd:1,show_title:1,show_byline:1,show_portrait:0,fullscreen:1},html5video:{tpl:'<video class="fancybox__html5video" playsinline controls controlsList="nodownload" poster="{{poster}}">\n  <source src="{{src}}" type="{{format}}" />\n  Sorry, your browser doesn\'t support embedded videos, <a href="{{src}}">download</a> and watch with your favorite video player!\n</video>',format:""}};var t=function(){function a(U){c(this,a),this.fancybox=U;for(var d=0,i=["onReady","onClosing","onDone","onPageChange","onCreateSlide","onRemoveSlide","onImageStatusChange"];d<i.length;d++){var e=i[d];this[e]=this[e].bind(this)}this.events={ready:this.onReady,closing:this.onClosing,done:this.onDone,"Carousel.change":this.onPageChange,"Carousel.createSlide":this.onCreateSlide,"Carousel.removeSlide":this.onRemoveSlide}}return cS(a,[{key:"onReady",value:function(){var a=this;this.fancybox.Carousel.slides.forEach(function(U){U.$el&&a.setContent(U)})}},{key:"onDone",value:function(a,U){this.handleCursor(U)}},{key:"onClosing",value:function(a){clearTimeout(this.clickTimer),a.Carousel.slides.forEach(function(a){a.$image&&(a.state="destroy"),a.Panzoom&&a.Panzoom.detachEvents()}),"closing"===this.fancybox.state&&this.canZoom(a.getSlide())&&this.zoomOut()}},{key:"onCreateSlide",value:function(a,U,d){"ready"===this.fancybox.state&&this.setContent(d)}},{key:"onRemoveSlide",value:function(a,U,d){d.$image&&(d.$el.classList.remove(a.option("Image.canZoomInClass")),d.$image.remove(),d.$image=null),d.Panzoom&&(d.Panzoom.destroy(),d.Panzoom=null),d.$el&&d.$el.dataset&&delete d.$el.dataset.imageFit}},{key:"setContent",value:function(a){var U=this;if(!(a.isDom||a.html||a.type&&"image"!==a.type||a.$image)){a.type="image",a.state="loading";var d=document.createElement("div");d.style.visibility="hidden";var i=document.createElement("img");i.addEventListener("load",function(d){d.stopImmediatePropagation(),U.onImageStatusChange(a)}),i.addEventListener("error",function(){U.onImageStatusChange(a)}),i.src=a.src,i.alt="",i.draggable=!1,i.classList.add("fancybox__image"),a.srcset&&i.setAttribute("srcset",a.srcset),a.sizes&&i.setAttribute("sizes",a.sizes),a.$image=i;var c=this.fancybox.option("Image.wrap");if(c){var e=document.createElement("div");e.classList.add("string"==typeof c?c:"fancybox__image-wrap"),e.appendChild(i),d.appendChild(e),a.$wrap=e}else d.appendChild(i);a.$el.dataset.imageFit=this.fancybox.option("Image.fit"),this.fancybox.setContent(a,d),i.complete||i.error?this.onImageStatusChange(a):this.fancybox.showLoading(a)}}},{key:"onImageStatusChange",value:function(a){var U=this,d=a.$image;d&&"loading"===a.state&&(d.complete&&d.naturalWidth&&d.naturalHeight?(this.fancybox.hideLoading(a),"contain"===this.fancybox.option("Image.fit")&&this.initSlidePanzoom(a),a.$el.addEventListener("wheel",function(d){return U.onWheel(a,d)},{passive:!1}),a.$content.addEventListener("click",function(d){return U.onClick(a,d)},{passive:!1}),this.revealContent(a)):this.fancybox.setError(a,"{{IMAGE_ERROR}}"))}},{key:"initSlidePanzoom",value:function(a){var U=this;a.Panzoom||(a.Panzoom=new bW(a.$el,eX(!0,this.fancybox.option("Image.Panzoom",{}),{viewport:a.$wrap,content:a.$image,wrapInner:!1,textSelection:!0,touch:this.fancybox.option("Image.touch"),panOnlyZoomed:!0,click:!1,wheel:!1})),a.Panzoom.on("startAnimation",function(){U.fancybox.trigger("Image.startAnimation",a)}),a.Panzoom.on("endAnimation",function(){"zoomIn"===a.state&&U.fancybox.done(a),U.handleCursor(a),U.fancybox.trigger("Image.endAnimation",a)}),a.Panzoom.on("afterUpdate",function(){U.handleCursor(a),U.fancybox.trigger("Image.afterUpdate",a)}))}},{key:"revealContent",value:function(a){null===this.fancybox.Carousel.prevPage&&a.index===this.fancybox.options.startIndex&&this.canZoom(a)?this.zoomIn():this.fancybox.revealContent(a)}},{key:"getZoomInfo",value:function(a){var U=a.$thumb.getBoundingClientRect(),d=U.width,i=U.height,c=a.$content.getBoundingClientRect(),e=c.width,cS=c.height,dA=c.top-U.top,dZ=c.left-U.left,ei=this.fancybox.option("Image.zoomOpacity");return"auto"===ei&&(ei=Math.abs(d/i-e/cS)>.1),{top:dA,left:dZ,scale:U.width/e,opacity:ei}}},{key:"canZoom",value:function(a){var U=this.fancybox,d=U.$container;if(window.visualViewport&&1!==window.visualViewport.scale)return!1;if(!U.option("Image.zoom")||"contain"!==U.option("Image.fit"))return!1;var i=a.$thumb;if(!i||"loading"===a.state)return!1;d.classList.add("fancybox__no-click");var c,e=i.getBoundingClientRect();if(this.fancybox.option("Image.ignoreCoveredThumbnail")){var cS=document.elementFromPoint(e.left+1,e.top+1)===i,dA=document.elementFromPoint(e.right-1,e.bottom-1)===i;c=cS&&dA}else c=document.elementFromPoint(e.left+.5*e.width,e.top+.5*e.height)===i;return d.classList.remove("fancybox__no-click"),c}},{key:"zoomIn",value:function(){var a=this.fancybox,U=a.getSlide(),d=U.Panzoom,i=this.getZoomInfo(U),c=i.top,e=i.left,cS=i.scale,dA=i.opacity;U.state="zoomIn",a.trigger("reveal",U),d.panTo({x:-1*e,y:-1*c,scale:cS,friction:0,ignoreBounds:!0}),U.$content.style.visibility="",!0===dA&&d.on("afterTransform",function(a){"zoomIn"!==U.state&&"zoomOut"!==U.state||(a.$content.style.opacity=Math.min(1,1-(1-a.content.scale)/(1-cS)))}),d.panTo({x:0,y:0,scale:1,friction:this.fancybox.option("Image.zoomFriction")})}},{key:"zoomOut",value:function(){var a=this,U=this.fancybox,d=U.getSlide(),i=d.Panzoom;if(i){d.state="zoomOut",U.state="customClosing",d.$caption&&(d.$caption.style.visibility="hidden");var c=this.fancybox.option("Image.zoomFriction"),e=function(U){var e=a.getZoomInfo(d),cS=e.top,dA=e.left,dZ=e.scale,ei=e.opacity;U||ei||(c*=.82),i.panTo({x:-1*dA,y:-1*cS,scale:dZ,friction:c,ignoreBounds:!0}),c*=.98};window.addEventListener("scroll",e),i.on("endAnimation",function(){window.removeEventListener("scroll",e),U.destroy()}),e()}}},{key:"handleCursor",value:function(a){if("image"===a.type){var U=a.Panzoom,d=this.fancybox.option("Image.click"),i=a.$el.classList;if(U&&"toggleZoom"===d)i[U&&1===U.content.scale&&U.option("maxScale")-U.content.scale>.01?"add":"remove"](this.fancybox.option("Image.canZoomInClass"));else"close"===d&&i.add(this.fancybox.option("Image.canZoomOutClass"))}}},{key:"onWheel",value:function(a,U){if("ready"===this.fancybox.state&&!1!==this.fancybox.trigger("Image.wheel",U))switch(this.fancybox.option("Image.wheel")){case"zoom":a.Panzoom&&a.Panzoom.zoomWithWheel(U);break;case"close":this.fancybox.close();break;case"slide":this.fancybox[U.deltaY<0?"prev":"next"]()}}},{key:"onClick",value:function(a,U){var d=this;if("ready"===this.fancybox.state){var i=a.Panzoom;if(!i||!i.dragPosition.midPoint&&0===i.dragOffset.x&&0===i.dragOffset.y&&1===i.dragOffset.scale){if(this.fancybox.Carousel.Panzoom.lockAxis)return!1;var c=function(i){if(!1!==d.fancybox.trigger("Image.click",U))switch(i){case"toggleZoom":U.stopPropagation(),a.Panzoom&&a.Panzoom.zoomWithClick(U);break;case"close":d.fancybox.close();break;case"next":U.stopPropagation(),d.fancybox.next()}};this.clickTimer&&(clearTimeout(this.clickTimer),this.clickTimer=null);var e=this.fancybox.option("Image.click"),cS=this.fancybox.option("Image.doubleClick");cS?1===U.detail?this.clickTimer=setTimeout(function(){c(e)},300):2===U.detail&&c(cS):c(e)}}}},{key:"onPageChange",value:function(a,U){var d=a.getSlide();U.slides.forEach(function(a){a.Panzoom&&"done"===a.state&&a.index!==d.index&&a.Panzoom.panTo({x:0,y:0,scale:1,friction:.8})})}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events)}}]),a}();t.defaults={canZoomInClass:"can-zoom_in",canZoomOutClass:"can-zoom_out",zoom:!0,zoomOpacity:"auto",zoomFriction:.82,ignoreCoveredThumbnail:!1,touch:!0,click:"toggleZoom",doubleClick:null,wheel:"zoom",fit:"contain",wrap:!1,Panzoom:{ratio:1}};var u=function(){var a=window.location.hash.substr(1),U=a.split("-"),d=U.length>1&&/^\+?\d+$/.test(U[U.length-1])&&parseInt(U.pop(-1),10)||null;return{hash:a,slug:U.join("-"),index:d}},v=function(){function a(U){c(this,a),this.fancybox=U;for(var d=0,i=["onChange","onClosing"];d<i.length;d++){var e=i[d];this[e]=this[e].bind(this)}this.events={initCarousel:this.onChange,"Carousel.change":this.onChange,closing:this.onClosing},this.hasCreatedHistory=!1,this.origHash="",this.timer=null}return cS(a,[{key:"onChange",value:function(){var a=this,U=this.fancybox,d=U.Carousel;this.timer&&clearTimeout(this.timer);var i=null===d.prevPage,c=U.getSlide(),e=c.$trigger&&c.$trigger.dataset,cS=window.location.hash.substr(1),dA=!1;if(c.slug)dA=c.slug;else{var dZ=e&&e.fancybox;dZ&&dZ.length&&"true"!==dZ&&(dA=dZ+(d.slides.length>1?"-"+(c.index+1):""))}i&&(this.origHash=cS!==dA?this.origHash:""),dA&&cS!==dA&&(this.timer=setTimeout(function(){try{window.history[i?"pushState":"replaceState"]({},document.title,window.location.pathname+window.location.search+"#"+dA),i&&(a.hasCreatedHistory=!0)}catch(a){}},300))}},{key:"onClosing",value:function(){if(this.timer&&clearTimeout(this.timer),!0!==this.hasSilentClose){if(!this.hasCreatedHistory)try{return void window.history.replaceState({},document.title,window.location.pathname+window.location.search+(this.origHash?"#"+this.origHash:""))}catch(a){}window.history.back()}}},{key:"attach",value:function(a){a.on(this.events)}},{key:"detach",value:function(a){a.off(this.events)}}],[{key:"startFromUrl",value:function(){if(!a.Fancybox.getInstance()){var U=u(),d=U.hash,i=U.slug,c=U.index;if(i){var e=document.querySelector('[data-slug="'.concat(d,'"]'));if(e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})),!a.Fancybox.getInstance()){var cS=document.querySelectorAll('[data-fancybox="'.concat(i,'"]'));cS.length&&(null===c&&1===cS.length?e=cS[0]:c&&(e=cS[c-1]),e&&e.dispatchEvent(new CustomEvent("click",{bubbles:!0,cancelable:!0})))}}}}},{key:"onHashChange",value:function(){var U=u(),d=U.slug,i=U.index,c=a.Fancybox.getInstance();if(c){if(d){var e,cS=c.Carousel,dA=aj(cS.slides);try{for(dA.s();!(e=dA.n()).done;){var dZ=e.value;if(dZ.slug&&dZ.slug===d)return cS.slideTo(dZ.index)}}catch(a){dA.e(a)}finally{dA.f()}var ei=c.getSlide(),g=ei.$trigger&&ei.$trigger.dataset;if(g&&g.fancybox===d)return cS.slideTo(i-1)}c.plugins.Hash.hasSilentClose=!0,c.close()}a.startFromUrl()}},{key:"onReady",value:function(){window.addEventListener("hashchange",a.onHashChange,!1),a.startFromUrl()}},{key:"create",value:function(){o&&window.requestAnimationFrame(function(){a.onReady()})}},{key:"destroy",value:function(){window.removeEventListener("hashchange",a.onHashChange,!1)}}]),a}(),w={pageXOffset:0,pageYOffset:0,element:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement},activate:function(a){w.pageXOffset=window.pageXOffset,w.pageYOffset=window.pageYOffset,a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen()},deactivate:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}},x=function(){function a(U){c(this,a),this.fancybox=U,this.active=!1,this.handleVisibilityChange=this.handleVisibilityChange.bind(this)}return cS(a,[{key:"isActive",value:function(){return this.active}},{key:"setTimer",value:function(){var a=this;if(this.active&&!this.timer){var U=this.fancybox.option("slideshow.delay",3e3);this.timer=setTimeout(function(){a.timer=null,a.fancybox.option("infinite")||a.fancybox.getSlide().index!==a.fancybox.Carousel.slides.length-1?a.fancybox.next():a.fancybox.jumpTo(0,{friction:0})},U);var d=this.$progress;d||((d=document.createElement("div")).classList.add("fancybox__progress"),this.fancybox.$carousel.parentNode.insertBefore(d,this.fancybox.$carousel),this.$progress=d,d.offsetHeight),d.style.transitionDuration="".concat(U,"ms"),d.style.transform="scaleX(1)"}}},{key:"clearTimer",value:function(){clearTimeout(this.timer),this.timer=null,this.$progress&&(this.$progress.style.transitionDuration="",this.$progress.style.transform="",this.$progress.offsetHeight)}},{key:"activate",value:function(){this.active||(this.active=!0,this.fancybox.$container.classList.add("has-slideshow"),"done"===this.fancybox.getSlide().state&&this.setTimer(),document.addEventListener("visibilitychange",this.handleVisibilityChange,!1))}},{key:"handleVisibilityChange",value:function(){this.deactivate()}},{key:"deactivate",value:function(){this.active=!1,this.clearTimer(),this.fancybox.$container.classList.remove("has-slideshow"),document.removeEventListener("visibilitychange",this.handleVisibilityChange,!1)}},{key:"toggle",value:function(){this.active?this.deactivate():this.fancybox.Carousel.slides.length>1&&this.activate()}}]),a}(),y={items:{counter:{type:"div",class:"fancybox__counter",html:'<span data-fancybox-index=""></span>&nbsp;/&nbsp;<span data-fancybox-count=""></span>',tabindex:-1,position:"left"},prev:{type:"button",class:"fancybox__button--prev",label:"PREV",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M15 4l-8 8 8 8"/></svg>',click:function(a){a.preventDefault(),this.fancybox.prev()}},next:{type:"button",class:"fancybox__button--next",label:"NEXT",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M8 4l8 8-8 8"/></svg>',click:function(a){a.preventDefault(),this.fancybox.next()}},fullscreen:{type:"button",class:"fancybox__button--fullscreen",label:"TOGGLE_FULLSCREEN",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1">\n                <g><path d="M3 8 V3h5"></path><path d="M21 8V3h-5"></path><path d="M8 21H3v-5"></path><path d="M16 21h5v-5"></path></g>\n                <g><path d="M7 2v5H2M17 2v5h5M2 17h5v5M22 17h-5v5"/></g>\n            </svg>',click:function(a){a.preventDefault(),w.element()?w.deactivate():w.activate(this.fancybox.$container)}},slideshow:{type:"button",class:"fancybox__button--slideshow",label:"TOGGLE_SLIDESHOW",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1">\n                <g><path d="M6 4v16"/><path d="M20 12L6 20"/><path d="M20 12L6 4"/></g>\n                <g><path d="M7 4v15M17 4v15"/></g>\n            </svg>',click:function(a){a.preventDefault(),this.Slideshow.toggle()}},zoom:{type:"button",class:"fancybox__button--zoom",label:"TOGGLE_ZOOM",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><circle cx="10" cy="10" r="7"></circle><path d="M16 16 L21 21"></svg>',click:function(a){a.preventDefault();var U=this.fancybox.getSlide().Panzoom;U&&U.toggleZoom()}},download:{type:"link",label:"DOWNLOAD",class:"fancybox__button--download",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M12 15V3m0 12l-4-4m4 4l4-4M2 17l.62 2.48A2 2 0 004.56 21h14.88a2 2 0 001.94-1.51L22 17"/></svg>',click:function(a){a.stopPropagation()}},thumbs:{type:"button",label:"TOGGLE_THUMBS",class:"fancybox__button--thumbs",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><circle cx="4" cy="4" r="1" /><circle cx="12" cy="4" r="1" transform="rotate(90 12 4)"/><circle cx="20" cy="4" r="1" transform="rotate(90 20 4)"/><circle cx="4" cy="12" r="1" transform="rotate(90 4 12)"/><circle cx="12" cy="12" r="1" transform="rotate(90 12 12)"/><circle cx="20" cy="12" r="1" transform="rotate(90 20 12)"/><circle cx="4" cy="20" r="1" transform="rotate(90 4 20)"/><circle cx="12" cy="20" r="1" transform="rotate(90 12 20)"/><circle cx="20" cy="20" r="1" transform="rotate(90 20 20)"/></svg>',click:function(a){a.stopPropagation();var U=this.fancybox.plugins.Thumbs;U&&U.toggle()}},close:{type:"button",label:"CLOSE",class:"fancybox__button--close",html:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"></path></svg>',tabindex:1,click:function(a){a.stopPropagation(),a.preventDefault(),this.fancybox.close()}}},display:["counter","zoom","slideshow","fullscreen","thumbs","close"],autoEnable:!0},z=function(){function a(U){var d=this;c(this,a),this.fancybox=U,this.$container=null,this.state="init";for(var i=0,e=["onInit","onPrepare","onDone","onKeydown","onClosing","onChange","onSettle","onRefresh"];i<e.length;i++){var cS=e[i];this[cS]=this[cS].bind(this)}this.events={init:this.onInit,prepare:this.onPrepare,done:this.onDone,keydown:this.onKeydown,closing:this.onClosing,"Carousel.change":this.onChange,"Carousel.settle":this.onSettle,"Carousel.Panzoom.touchStart":function(){return d.onRefresh()},"Image.startAnimation":function(a,U){return d.onRefresh(U)},"Image.afterUpdate":function(a,U){return d.onRefresh(U)}}}return cS(a,[{key:"onInit",value:function(){if(this.fancybox.option("Toolbar.autoEnable")){var a,U=!1,d=aj(this.fancybox.items);try{for(d.s();!(a=d.n()).done;){if("image"===a.value.type){U=!0;break}}}catch(a){d.e(a)}finally{d.f()}if(!U)return void(this.state="disabled")}var i,c=aj(this.fancybox.option("Toolbar.display"));try{for(c.s();!(i=c.n()).done;){var e=i.value;if("close"===(gb(e)?e.id:e)){this.fancybox.options.closeButton=!1;break}}}catch(a){c.e(a)}finally{c.f()}}},{key:"onPrepare",value:function(){if("init"===this.state&&(this.build(),this.update(),this.Slideshow=new x(this.fancybox),!this.fancybox.Carousel.prevPage&&(this.fancybox.option("slideshow.autoStart")&&this.Slideshow.activate(),this.fancybox.option("fullscreen.autoStart")&&!w.element())))try{w.activate(this.fancybox.$container)}catch(a){}}},{key:"onFsChange",value:function(){window.scrollTo(w.pageXOffset,w.pageYOffset)}},{key:"onSettle",value:function(){this.Slideshow&&this.Slideshow.isActive()&&(this.fancybox.getSlide().index!==this.fancybox.Carousel.slides.length-1||this.fancybox.option("infinite")?"done"===this.fancybox.getSlide().state&&this.Slideshow.setTimer():this.Slideshow.deactivate())}},{key:"onChange",value:function(){this.update(),this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer()}},{key:"onDone",value:function(a,U){U.index===a.getSlide().index&&(this.update(),this.Slideshow&&this.Slideshow.isActive()&&(this.fancybox.option("infinite")||U.index!==this.fancybox.Carousel.slides.length-1?this.Slideshow.setTimer():this.Slideshow.deactivate()))}},{key:"onRefresh",value:function(a){a&&a.index!==this.fancybox.getSlide().index||(this.update(),!this.Slideshow||!this.Slideshow.isActive()||a&&"done"!==a.state||this.Slideshow.deactivate())}},{key:"onKeydown",value:function(a,U,d){" "===U&&(this.Slideshow.toggle(),d.preventDefault())}},{key:"onClosing",value:function(){this.Slideshow&&this.Slideshow.deactivate(),document.removeEventListener("fullscreenchange",this.onFsChange)}},{key:"createElement",value:function(a){var U,d;("div"===a.type?U=document.createElement("div"):(U=document.createElement("link"===a.type?"a":"button")).classList.add("carousel__button"),U.innerHTML=a.html,U.setAttribute("tabindex",a.tabindex||0),a.class)&&(d=U.classList).add.apply(d,f(a.class.split(" ")));return a.label&&U.setAttribute("title",this.fancybox.localize("{{".concat(a.label,"}}"))),a.click&&U.addEventListener("click",a.click.bind(this)),"prev"===a.id&&U.setAttribute("data-fancybox-prev",""),"next"===a.id&&U.setAttribute("data-fancybox-next",""),U}},{key:"build",value:function(){var a=this;this.cleanup();var U,d=this.fancybox.option("Toolbar.items"),i=[{position:"left",items:[]},{position:"center",items:[]},{position:"right",items:[]}],c=this.fancybox.plugins.Thumbs,e=aj(this.fancybox.option("Toolbar.display"));try{var cS=function(){var e=U.value,cS=void 0,dA=void 0;if(gb(e)?(cS=e.id,dA=eX({},d[cS],e)):dA=d[cS=e],["counter","next","prev","slideshow"].includes(cS)&&a.fancybox.items.length<2)return"continue";if("fullscreen"===cS){if(!document.fullscreenEnabled||window.fullScreen)return"continue";document.addEventListener("fullscreenchange",a.onFsChange)}if("thumbs"===cS&&(!c||"disabled"===c.state))return"continue";if(!dA)return"continue";var dZ=dA.position||"right",ei=i.find(function(a){return a.position===dZ});ei&&ei.items.push(dA)};for(e.s();!(U=e.n()).done;)cS()}catch(a){e.e(a)}finally{e.f()}var dA=document.createElement("div");dA.classList.add("fancybox__toolbar");for(var dZ=0,ei=i;dZ<ei.length;dZ++){var g=ei[dZ];if(g.items.length){var H=document.createElement("div");H.classList.add("fancybox__toolbar__items"),H.classList.add("fancybox__toolbar__items--".concat(g.position));var cZ,b=aj(g.items);try{for(b.s();!(cZ=b.n()).done;){var j=cZ.value;H.appendChild(this.createElement(j))}}catch(a){b.e(a)}finally{b.f()}dA.appendChild(H)}}this.fancybox.$carousel.parentNode.insertBefore(dA,this.fancybox.$carousel),this.$container=dA}},{key:"update",value:function(){var a,U=this.fancybox.getSlide(),d=U.index,i=this.fancybox.items.length,c=U.downloadSrc||("image"!==U.type||U.error?null:U.src),e=aj(this.fancybox.$container.querySelectorAll("a.fancybox__button--download"));try{for(e.s();!(a=e.n()).done;){var cS=a.value;c?(cS.removeAttribute("disabled"),cS.setAttribute("href",c),cS.setAttribute("download",c),cS.setAttribute("target","_blank")):(cS.setAttribute("disabled",""),cS.removeAttribute("href"),cS.removeAttribute("download"))}}catch(a){e.e(a)}finally{e.f()}var dA,dZ=U.Panzoom,ei=dZ&&dZ.option("maxScale")>dZ.option("baseScale"),g=aj(this.fancybox.$container.querySelectorAll(".fancybox__button--zoom"));try{for(g.s();!(dA=g.n()).done;){var H=dA.value;ei?H.removeAttribute("disabled"):H.setAttribute("disabled","")}}catch(a){g.e(a)}finally{g.f()}var cZ,b=aj(this.fancybox.$container.querySelectorAll("[data-fancybox-index]"));try{for(b.s();!(cZ=b.n()).done;){cZ.value.innerHTML=U.index+1}}catch(a){b.e(a)}finally{b.f()}var j,f=aj(this.fancybox.$container.querySelectorAll("[data-fancybox-count]"));try{for(f.s();!(j=f.n()).done;){j.value.innerHTML=i}}catch(a){f.e(a)}finally{f.f()}if(!this.fancybox.option("infinite")){var F,aU=aj(this.fancybox.$container.querySelectorAll("[data-fancybox-prev]"));try{for(aU.s();!(F=aU.n()).done;){var gb=F.value;0===d?gb.setAttribute("disabled",""):gb.removeAttribute("disabled")}}catch(a){aU.e(a)}finally{aU.f()}var eX,ec=aj(this.fancybox.$container.querySelectorAll("[data-fancybox-next]"));try{for(ec.s();!(eX=ec.n()).done;){var gF=eX.value;d===i-1?gF.setAttribute("disabled",""):gF.removeAttribute("disabled")}}catch(a){ec.e(a)}finally{ec.f()}}}},{key:"cleanup",value:function(){this.Slideshow&&this.Slideshow.isActive()&&this.Slideshow.clearTimer(),this.$container&&this.$container.remove(),this.$container=null}},{key:"attach",value:function(){this.fancybox.on(this.events)}},{key:"detach",value:function(){this.fancybox.off(this.events),this.cleanup()}}]),a}();z.defaults=y;var A={ScrollLock:p,Thumbs:q,Html:s,Toolbar:z,Image:t,Hash:v},B={startIndex:0,preload:1,infinite:!0,showClass:"fancybox-zoomInUp",hideClass:"fancybox-fadeOut",animated:!0,hideScrollbar:!0,parentEl:null,mainClass:null,autoFocus:!0,trapFocus:!0,placeFocusBack:!0,click:"close",closeButton:"inside",dragToClose:!0,keyboard:{Escape:"close",Delete:"close",Backspace:"close",PageUp:"next",PageDown:"prev",ArrowUp:"next",ArrowDown:"prev",ArrowRight:"next",ArrowLeft:"prev"},template:{closeButton:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" tabindex="-1"><path d="M20 20L4 4m16 0L4 20"/></svg>',spinner:'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="50" viewBox="25 25 50 50" tabindex="-1"><circle cx="50" cy="50" r="20"/></svg>',main:null},l10n:{CLOSE:"Close",NEXT:"Next",PREV:"Previous",MODAL:"You can close this modal content with the ESC key",ERROR:"Something Went Wrong, Please Try Again Later",IMAGE_ERROR:"Image Not Found",ELEMENT_NOT_FOUND:"HTML Element Not Found",AJAX_NOT_FOUND:"Error Loading AJAX : Not Found",AJAX_FORBIDDEN:"Error Loading AJAX : Forbidden",IFRAME_ERROR:"Error Loading Page",TOGGLE_ZOOM:"Toggle zoom level",TOGGLE_THUMBS:"Toggle thumbnails",TOGGLE_SLIDESHOW:"Toggle slideshow",TOGGLE_FULLSCREEN:"Toggle full-screen mode",DOWNLOAD:"Download"}},C=0,D=function(a){dZ(d,a);var U=b(d);function d(a){var i,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return c(this,d),(i=U.call(this,eX(!0,{},B,e))).bindHandlers(),i.state="init",i.setItems(a),i.attachPlugins(d.Plugins),i.trigger("init"),!0===i.option("hideScrollbar")&&i.hideScrollbar(),i.initLayout(),i.initCarousel(),i.attachEvents(),i.trigger("prepare"),i.state="ready",i.trigger("ready"),i.$container.setAttribute("aria-hidden","false"),i.option("trapFocus")&&i.focus(),i}return cS(d,[{key:"bindHandlers",value:function(){for(var a=0,U=["onMousedown","onKeydown","onClick","onCreateSlide","onTouchMove","onTouchEnd","onTransform"];a<U.length;a++){var d=U[a];this[d]=this[d].bind(this)}}},{key:"attachEvents",value:function(){document.addEventListener("mousedown",this.onMousedown),document.addEventListener("keydown",this.onKeydown),this.$container.addEventListener("click",this.onClick)}},{key:"detachEvents",value:function(){document.removeEventListener("mousedown",this.onMousedown),document.removeEventListener("keydown",this.onKeydown),this.$container.removeEventListener("click",this.onClick)}},{key:"initLayout",value:function(){var a=this;this.$root=this.option("parentEl")||document.body;var U=this.option("template.main");U&&(this.$root.insertAdjacentHTML("beforeend",this.localize(U)),this.$container=this.$root.querySelector(".fancybox__container")),this.$container||(this.$container=document.createElement("div"),this.$root.appendChild(this.$container)),this.$container.onscroll=function(){return a.$container.scrollLeft=0,!1},Object.entries({class:"fancybox__container",role:"dialog","aria-modal":"true","aria-hidden":"true","aria-label":this.localize("{{MODAL}}")}).forEach(function(U){var d;return(d=a.$container).setAttribute.apply(d,f(U))}),this.option("animated")&&this.$container.classList.add("is-animated"),this.$backdrop=this.$container.querySelector(".fancybox__backdrop"),this.$backdrop||(this.$backdrop=document.createElement("div"),this.$backdrop.classList.add("fancybox__backdrop"),this.$container.appendChild(this.$backdrop)),this.$carousel=this.$container.querySelector(".fancybox__carousel"),this.$carousel||(this.$carousel=document.createElement("div"),this.$carousel.classList.add("fancybox__carousel"),this.$container.appendChild(this.$carousel)),this.$container.Fancybox=this,this.id=this.$container.getAttribute("id"),this.id||(this.id=this.options.id||++C,this.$container.setAttribute("id","fancybox-"+this.id));var d,i=this.options.mainClass;i&&(d=this.$container.classList).add.apply(d,f(i.split(" ")));return document.documentElement.classList.add("with-fancybox"),this.trigger("initLayout"),this}},{key:"setItems",value:function(a){var U,d=[],i=aj(a);try{for(i.s();!(U=i.n()).done;){var c=U.value,e=c.$trigger;if(e){var cS=e.dataset||{};c.src=cS.src||e.getAttribute("href")||c.src,c.type=cS.type||c.type,!c.src&&e instanceof HTMLImageElement&&(c.src=e.currentSrc||c.$trigger.src)}var dA=c.$thumb;if(!dA){var dZ=c.$trigger&&c.$trigger.origTarget;dZ&&(dA=dZ instanceof HTMLImageElement?dZ:dZ.querySelector("img")),!dA&&c.$trigger&&(dA=c.$trigger instanceof HTMLImageElement?c.$trigger:c.$trigger.querySelector("img"))}c.$thumb=dA||null;var ei=c.thumb;!ei&&c.$thumb&&(ei=dA.currentSrc||dA.src),ei||"image"!==c.type||(ei=c.src),c.thumb=ei||null,c.caption=c.caption||"",d.push(c)}}catch(a){i.e(a)}finally{i.f()}this.items=d}},{key:"initCarousel",value:function(){var a=this;return this.Carousel=new n(this.$carousel,eX(!0,{},{classNames:{viewport:"fancybox__viewport",track:"fancybox__track",slide:"fancybox__slide"},textSelection:!0,preload:this.option("preload"),friction:.88,slides:this.items,initialPage:this.options.startIndex,slidesPerPage:1,infiniteX:this.option("infinite"),infiniteY:!0,l10n:this.option("l10n"),Dots:!1,Navigation:{classNames:{main:"fancybox__nav",button:"carousel__button",next:"is-next",prev:"is-prev"}},Panzoom:{textSelection:!0,panOnlyZoomed:function(){return a.Carousel&&a.Carousel.pages&&a.Carousel.pages.length<2&&!a.options.dragToClose},lockAxis:function(){if(a.Carousel){var U="x";return a.options.dragToClose&&(U+="y"),U}}},on:{"*":function(U){for(var d=arguments.length,i=new Array(d>1?d-1:0),c=1;c<d;c++)i[c-1]=arguments[c];return a.trigger.apply(a,["Carousel.".concat(U)].concat(i))},init:function(U){return a.Carousel=U},createSlide:this.onCreateSlide}},this.option("Carousel"))),this.option("dragToClose")&&this.Carousel.Panzoom.on({touchMove:this.onTouchMove,afterTransform:this.onTransform,touchEnd:this.onTouchEnd}),this.trigger("initCarousel"),this}},{key:"onCreateSlide",value:function(a,U){var d=U.caption||"";if("function"==typeof this.options.caption&&(d=this.options.caption.call(this,this,this.Carousel,U)),"string"==typeof d&&d.length){var i=document.createElement("div"),c="fancybox__caption_".concat(this.id,"_").concat(U.index);i.className="fancybox__caption",i.innerHTML=d,i.setAttribute("id",c),U.$caption=U.$el.appendChild(i),U.$el.classList.add("has-caption"),U.$el.setAttribute("aria-labelledby",c)}}},{key:"onClick",value:function(a){if(!a.defaultPrevented&&(!a.target.closest(".fancybox__content")&&!window.getSelection().toString().length&&!1!==this.trigger("click",a)))switch(this.option("click")){case"close":this.close();break;case"next":this.next()}}},{key:"onTouchMove",value:function(){var a=this.getSlide().Panzoom;return!a||1===a.content.scale}},{key:"onTouchEnd",value:function(a){var U=a.dragOffset.y;Math.abs(U)>=150||Math.abs(U)>=35&&a.dragOffset.time<350?(this.option("hideClass")&&(this.getSlide().hideClass="fancybox-throwOut".concat(a.content.y<0?"Up":"Down")),this.close()):"y"===a.lockAxis&&a.panTo({y:0})}},{key:"onTransform",value:function(a){if(this.$backdrop){var U=Math.abs(a.content.y),d=U<1?"":Math.max(.33,Math.min(1,1-U/a.content.fitHeight*1.5));this.$container.style.setProperty("--fancybox-ts",d?"0s":""),this.$container.style.setProperty("--fancybox-opacity",d)}}},{key:"onMousedown",value:function(){document.body.classList.add("is-using-mouse")}},{key:"onKeydown",value:function(a){if(d.getInstance().id===this.id){document.body.classList.remove("is-using-mouse");var U=a.key;if("Tab"===U&&this.option("trapFocus"))this.focus(a);else{var i=this.option("keyboard");if(i&&!a.ctrlKey&&!a.altKey&&!a.shiftKey){var c=document.activeElement&&document.activeElement.classList,e=c&&c.contains("carousel__button");if("Escape"!==U&&!e)if(a.target.isContentEditable||-1!==["BUTTON","TEXTAREA","OPTION","INPUT","SELECT","VIDEO"].indexOf(a.target.nodeName))return;if(!1!==this.trigger("keydown",U,a)){var cS=i[U];"function"==typeof this[cS]&&this[cS]()}}}}}},{key:"getSlide",value:function(){var a=this.Carousel;if(!a)return null;var U=null===a.page?a.option("initialPage"):a.page,d=a.pages||[];return d.length&&d[U]?d[U].slides[0]:null}},{key:"focus",value:function(a){var U;void 0===d.preventScrollSupported&&(d.preventScrollSupported=(U=!1,document.createElement("div").focus({get preventScroll(){return U=!0,!1}}),U));var i=function(a){a.setActive?a.setActive():d.preventScrollSupported?a.focus({preventScroll:!0}):a.focus()};if(!(["init","closing","customClosing","destroy"].indexOf(this.state)>-1)){a&&a.preventDefault();var c=this.getSlide().$el;if(c){c.tabIndex=0;var e,cS=[],dA=aj([].slice.call(this.$container.querySelectorAll(["a[href]","area[href]",'input:not([disabled]):not([type="hidden"]):not([aria-hidden])',"select:not([disabled]):not([aria-hidden])","textarea:not([disabled]):not([aria-hidden])","button:not([disabled]):not([aria-hidden])","iframe","object","embed","video","audio","[contenteditable]",'[tabindex]:not([tabindex^="-"]):not([disabled]):not([aria-hidden])'])));try{for(dA.s();!(e=dA.n()).done;){var dZ=e.value;if(!dZ.classList||!dZ.classList.contains("fancybox__slide")){var ei=dZ.closest(".fancybox__slide");ei?ei===c&&cS[dZ.hasAttribute("autofocus")?"unshift":"push"](dZ):cS.push(dZ)}}}catch(a){dA.e(a)}finally{dA.f()}if(cS.length){this.Carousel.pages.length>1&&cS.push(c),cS.sort(function(a,U){return a.tabIndex>U.tabIndex?-1:a.tabIndex<U.tabIndex?1:0});var g=cS.indexOf(document.activeElement),H=a&&!a.shiftKey,cZ=a&&a.shiftKey;return H?g===cS.length-1?i(cS[0]):i(cS[g+1]):cZ?i(0===g?cS[cS.length-1]:cS[g-1]):g<0?i(cS[0]):void 0}}}}},{key:"hideScrollbar",value:function(){if(o){var a=window.innerWidth-document.documentElement.getBoundingClientRect().width,U="fancybox-style-noscroll",d=document.getElementById(U);d||a>0&&((d=document.createElement("style")).id=U,d.type="text/css",d.innerHTML=".compensate-for-scrollbar {padding-right: ".concat(a,";}"),document.getElementsByTagName("head")[0].appendChild(d),document.body.classList.add("compensate-for-scrollbar"))}}},{key:"revealScrollbar",value:function(){document.body.classList.remove("compensate-for-scrollbar");var a=document.getElementById("fancybox-style-noscroll");a&&a.remove()}},{key:"clearContent",value:function(a){this.Carousel.trigger("removeSlide",a),a.$content&&(a.$content.remove(),a.$content=null),a._className&&a.$el.classList.remove(a._className)}},{key:"setContent",value:function(a,U){var d,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=a.$el;if(U instanceof HTMLElement?["img","iframe","video","audio"].indexOf(U.nodeName.toLowerCase())>-1?(d=document.createElement("div")).appendChild(U):d=U:(d=document.createElement("div")).innerHTML=U,!(d instanceof Element))throw new Error("Element expected");return a._className="has-".concat(i.suffix||a.type||"unknown"),c.classList.add(a._className),d.classList.add("fancybox__content"),"none"!==d.style.display&&"none"!==window.getComputedStyle(d).getPropertyValue("display")||(d.style.display="flex"),a.id&&d.setAttribute("id",a.id),a.$content=d,c.prepend(d),this.manageCloseButton(a),"loading"!==a.state&&this.revealContent(a),d}},{key:"manageCloseButton",value:function(a){var U=this,d=void 0===a.closeButton?this.option("closeButton"):a.closeButton;if(d&&("top"!==d||!this.$closeButton)){var i=document.createElement("button");i.classList.add("carousel__button","is-close"),i.setAttribute("title",this.options.l10n.CLOSE),i.innerHTML=this.option("template.closeButton"),i.addEventListener("click",function(a){return U.close(a)}),"inside"===d?(a.$closeButton&&a.$closeButton.remove(),a.$closeButton=a.$content.appendChild(i)):this.$closeButton=this.$container.insertBefore(i,this.$container.firstChild)}}},{key:"revealContent",value:function(a){var U=this;this.trigger("reveal",a),a.$content.style.visibility="";var d=!1;a.error||"loading"===a.state||null!==this.Carousel.prevPage||a.index!==this.options.startIndex||(d=void 0===a.showClass?this.option("showClass"):a.showClass),d?(a.state="animating",this.animateCSS(a.$content,d,function(){U.done(a)})):this.done(a)}},{key:"animateCSS",value:function(a,U,d){if(a&&a.dispatchEvent(new CustomEvent("animationend",{bubbles:!0,cancelable:!0})),a&&U){a.addEventListener("animationend",function i(c){c.currentTarget===this&&(a.removeEventListener("animationend",i),d&&d(),a.classList.remove(U))}),a.classList.add(U)}else"function"==typeof d&&d()}},{key:"done",value:function(a){a.state="done",this.trigger("done",a);var U=this.getSlide();U&&a.index===U.index&&this.option("autoFocus")&&this.focus()}},{key:"setError",value:function(a,U){a.error=U,this.hideLoading(a),this.clearContent(a);var d=document.createElement("div");d.classList.add("fancybox-error"),d.innerHTML=this.localize(U||"<p>{{ERROR}}</p>"),this.setContent(a,d,{suffix:"error"})}},{key:"showLoading",value:function(a){var U=this;a.state="loading",a.$el.classList.add("is-loading");var d=a.$el.querySelector(".fancybox__spinner");d||((d=document.createElement("div")).classList.add("fancybox__spinner"),d.innerHTML=this.option("template.spinner"),d.addEventListener("click",function(){U.Carousel.Panzoom.velocity||U.close()}),a.$el.prepend(d))}},{key:"hideLoading",value:function(a){var U=a.$el&&a.$el.querySelector(".fancybox__spinner");U&&(U.remove(),a.$el.classList.remove("is-loading")),"loading"===a.state&&(this.trigger("load",a),a.state="ready")}},{key:"next",value:function(){var a=this.Carousel;a&&a.pages.length>1&&a.slideNext()}},{key:"prev",value:function(){var a=this.Carousel;a&&a.pages.length>1&&a.slidePrev()}},{key:"jumpTo",value:function(){var a;this.Carousel&&(a=this.Carousel).slideTo.apply(a,arguments)}},{key:"close",value:function(a){var U=this;if(a&&a.preventDefault(),!(["closing","customClosing","destroy"].indexOf(this.state)>-1)&&!1!==this.trigger("shouldClose",a)&&(this.state="closing",this.Carousel.Panzoom.destroy(),this.detachEvents(),this.trigger("closing",a),"destroy"!==this.state)){this.$container.setAttribute("aria-hidden","true"),this.$container.classList.add("is-closing");var d=this.getSlide();if(this.Carousel.slides.forEach(function(a){a.$content&&a.index!==d.index&&U.Carousel.trigger("removeSlide",a)}),"closing"===this.state){var i=void 0===d.hideClass?this.option("hideClass"):d.hideClass;this.animateCSS(d.$content,i,function(){U.destroy()},!0)}}}},{key:"destroy",value:function(){this.state="destroy",this.trigger("destroy");var a=this.option("placeFocusBack")?this.getSlide().$trigger:null;if(this.Carousel.destroy(),this.detachPlugins(),this.Carousel=null,this.options={},this.events={},this.$container.remove(),this.$container=this.$backdrop=this.$carousel=null,a)if(d.preventScrollSupported)a.focus({preventScroll:!0});else{var U=document.body.scrollTop;a.focus(),document.body.scrollTop=U}var i=d.getInstance();i?i.focus():(document.documentElement.classList.remove("with-fancybox"),document.body.classList.remove("is-using-mouse"),this.revealScrollbar())}}],[{key:"show",value:function(a){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new d(a,U)}},{key:"fromEvent",value:function(a){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a.defaultPrevented&&!(a.button&&0!==a.button||a.ctrlKey||a.metaKey||a.shiftKey)){var i,c,e,cS=a.target;if((cS.matches("[data-fancybox-trigger]")||(cS=cS.closest("[data-fancybox-trigger]")))&&(i=cS&&cS.dataset&&cS.dataset.fancyboxTrigger),i){var dA=document.querySelectorAll('[data-fancybox="'.concat(i,'"]')),dZ=parseInt(cS.dataset.fancyboxIndex,10)||0;cS=dA.length?dA[dZ]:cS}cS||(cS=a.target),Array.from(d.openers.keys()).reverse().some(function(U){if((e=cS).matches(U)||(e=e.closest(U)))return a.preventDefault(),c=U,!0});var ei=!1;if(c){U.event=a,U.target=e,e.origTarget=a.target,ei=d.fromOpener(c,U);var g=d.getInstance();g&&"ready"===g.state&&a.detail&&document.body.classList.add("is-using-mouse")}return ei}}},{key:"fromOpener",value:function(a){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=function(a){for(var U=["false","0","no","null","undefined"],d=["true","1","yes"],i=Object.assign({},a.dataset),c=0,e=Object.entries(i);c<e.length;c++){var cS=j(e[c],2),dA=cS[0],dZ=cS[1];if("string"==typeof dZ||dZ instanceof String)if(U.indexOf(dZ)>-1)i[dA]=!1;else if(d.indexOf(i[dA])>-1)i[dA]=!0;else try{i[dA]=JSON.parse(dZ)}catch(a){i[dA]=dZ}}return delete i.fancybox,delete i.type,a instanceof Element&&(i.$trigger=a),i},c=[],e=U.startIndex||0,cS=U.target||null,dA=void 0===(U=eX({},U,d.openers.get(a))).groupAttr?"data-fancybox":U.groupAttr,dZ=dA&&cS&&cS.getAttribute("".concat(dA)),ei=void 0!==U.groupAll&&U.groupAll;if(ei||dZ?(c=[].slice.call(document.querySelectorAll(a)),ei||(c=c.filter(function(a){return a.getAttribute("".concat(dA))===dZ}))):c=[cS],!c.length)return!1;var g=d.getInstance();return!(g&&c.indexOf(g.options.$trigger)>-1)&&(e=cS?c.indexOf(cS):e,new d(c=c.map(i),eX({},U,{startIndex:e,$trigger:cS})))}},{key:"bind",value:function(a){var U=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o){if(!d.openers.size){document.body.addEventListener("click",d.fromEvent,!1);for(var i=0,c=Object.entries(d.Plugins||{});i<c.length;i++){var e=j(c[i],2);e[0];var cS=e[1];cS.Fancybox=this,"function"==typeof cS.create&&cS.create()}}d.openers.set(a,U)}}},{key:"unbind",value:function(a){d.openers.delete(a),d.openers.size||d.destroy()}},{key:"destroy",value:function(){for(var a;a=d.getInstance();)a.destroy();d.openers=new Map,document.body.removeEventListener("click",d.fromEvent,!1)}},{key:"getInstance",value:function(a){var U,d=aj(a?[document.getElementById("fancybox-".concat(a))]:Array.from(document.querySelectorAll(".fancybox__container")).reverse());try{for(d.s();!(U=d.n()).done;){var i=U.value,c=i&&i.Fancybox;if(c&&"closing"!==c.state&&"customClosing"!==c.state)return c}}catch(a){d.e(a)}finally{d.f()}return null}},{key:"close",value:function(){for(var a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],U=null;U=d.getInstance();)if(U.close(),!a)return}}]),d}(bC);D.version="4.0.0-beta.2",D.defaults=B,D.openers=new Map,D.Plugins=A,D.bind("[data-fancybox]"),a.Carousel=n,a.Fancybox=D,a.Panzoom=bW});